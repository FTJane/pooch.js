(function(){pooch={version:"0.0.3",author:"Jeremy White",chart:function(c){return new J(c)},data:function(c){return new _data(c)},fetch:function(c){return _fetch(c)},map:function(c,a){return new pooch_map(c,a)},popup:function(c){return new _popup(c)},symbols:function(c){return new _symbol(c)},zoomControl:function(c){return new _zoomControl(c)}};pooch.supportsCanvas=!!document.createElement("canvas").getContext;var J=function(c){var a=this,b=0,h=0,k=null,d="chart"+_chartNdx,v=1,q=1,j=0,p=100,m=0,n=
100,s=0,z=100,r=0,t=100,u=1,w=1;_zoom=0;_zoomLevels=[1,2,4,8,16];_center={x:50,y:50};_offsetY=_offsetX=0;_cvsHidden=_ctxHidden=_ctxHltMain=_ctxMain=_ctxHltBack=_ctxBack=null;_isAnimating=!1;_isInteract=!0;_isDragging=_isMouseDown=!1;_projection=_zoomControl=null;_mouseIgnore=!1;_circle=2*Math.PI;_funcQueue=[];_sym=[];_symCur=_symObjCur=null;_symAction="over";_timeOut=null;_layersPre=[{_container:"div"}];_layersMain=[{_highlightMain:"canvas"},{_main:"canvas"},{_highlightBack:"canvas"},{_back:"canvas"}];
_layersPost=[{_mouse:"div"},{_popup:"div"}];var l=function(a){var b=pooch.helpers.keyFromObj(a),g=0===a[b]?0:"px";cssObj={};ndxPre=_layersPre.length;ndxMain=_layersMain.length;ndxPost=_layersPost.length;for(cssObj[b]=a[b]+g;ndxPre--;)g=pooch.helpers.keyFromObj(_layersPre[ndxPre]),g=pooch.fetch("#pooch"+g+"_"+d),g.css(cssObj).dom()[b]=a[b],"width"==b&&g.css({left:-(a.width/3)+"px"}),"height"==b&&g.css({top:-(a.height/3)+"px"});if(pooch.supportsCanvas)for(;ndxMain--;)g=pooch.helpers.keyFromObj(_layersMain[ndxMain]),
pooch.fetch("#pooch"+g+"_"+d).css(cssObj).dom()[b]=a[b];for(;ndxPost--;)g=pooch.helpers.keyFromObj(_layersPost[ndxPost]),pooch.fetch("#pooch"+g+"_"+d).css(cssObj).dom()[b]=a[b]},C=function(a){var b=pooch.fetch("#pooch_popup_"+d).dom();a(b)},F=function(a,g,c){var e=0,k=0,e=a.popup().offsetX(),k=a.popup().offsetY(),d=a.popup().width(),f=a.popup().height(),q=h/3,k=c-f-k-10<b/3?k:-f-k,e=g+e-d/2-10<q?q+-g+10:g+e+d/2+10>2*q?2*q-(g+d)-10:e+d/-2;a.popup().x(g+e).y(c+k)},D=function(a,K){if(!K){var c=a.localX,
e=a.localY,d=!1,f=!1,j=[],l=[],m=0,p=_sym.length,n=h,A=null,x=null;if(!_isMouseDown){for(var s=0;s<p;++s)if(_sym[s].interactive()){var y=_sym[s].state(),r;for(r in y){var z=0,w=0;switch(y[r].shape){case "circle":z=y[r].size;w=y[r].size;break;case "rect":case "hex":z=y[r].width/2;w=y[r].height/2;break;case "poly":a:{for(var d=y[r].shapePoints,t=[c,e],B=d.length;B--;){for(var u=d[B],C=!1,E=-1,I=u.length,H=I-1;++E<I;H=E)(u[E][1]<=t[1]&&t[1]<u[H][1]||u[H][1]<=t[1]&&t[1]<u[E][1])&&t[0]<(u[H][0]-u[E][0])*
(t[1]-u[E][1])/(u[H][1]-u[E][1])+u[E][0]&&(C=!C);if(C){d=!0;break a}}d=!1}}if("over"===_symAction){if(t=(B=_sym[s].map())?y[r].lng:y[r].x,B=B?y[r].lat:y[r].y,d||c<t+z&&c>t-z&&e<B+w&&e>B-w)j[m]=_sym[s],l[m]=y[r],f=!0,m++}else"closest"===_symAction&&(j[m]=_sym[s],l[m]=y[r],f=!0,m++)}}m=l.length;if(f){for(;m--;)l[m].drawFill&&(f=pooch.helpers.distanceToPoint(l[m].x,l[m].y,c,e),f<=n&&(A=j[m],x=l[m],n=f));l=A;symCur=x;if(_symCur!==symCur&&symCur){_symObjCur&&(_symObjCur.popup().hide(),"MAIN"===_symObjCur.layer().toUpperCase()?
g(_ctxHltMain,h,b):g(_ctxHltBack,h,b));x={};j="MAIN"===l.layer().toUpperCase()?"highlightMain":"highlightBack";_symObjCur=l;_symCur=symCur;x[_symCur.poochID]=_symCur;v=q=1;l=_symObjCur;n=_symObjCur.state();A=_symCur.poochID;if(!_symCur||n[A]!==_symCur[A])l.popup().layout(A),F(l,c,e);pooch.fetch(k).css({cursor:"pointer"});G(null,j,{obj:_symObjCur,key:x})}else _symCur===symCur&&symCur&&F(l,c,e)}else _symCur&&(_symObjCur.popup().hide(),pooch.fetch(k).css({cursor:"default"}),"MAIN"===_symObjCur.layer().toUpperCase()?
g(_ctxHltMain,h,b):g(_ctxHltBack,h,b)),_symCur=_symObjCur=null}}},y=function(a,b,g,e,c){var h={},d=a.state();if(1===e){var k=a.data().datum(),f=a.symAttrs();b[g].list=[];for(var l in f)b[g][l]="function"===typeof f[l]?f[l](b[g],k[g]):null!==f[l]?f[l]:b[g][l],b[g][l]!==d[g][l]&&b[g].list.push(l)}for(k=b[g].list.length;k--;)f=b[g].list[k],l=a.stepFunc(f),h[f]=l(e,d[g][f],b[g][f],c,b[g].easing);return h},B=function(a,b,g,e){if(pooch.supportsCanvas){var c=e?b.fillColorHighlight:b.fillColor,h=e?b.fillOpacityHighlight:
b.fillOpacity,d=e?b.drawStrokeHighlight:b.drawStroke,f=e?b.strokeWidthHighlight:b.strokeWidth,k=e?b.strokeColorHighlight:b.strokeColor,l=e?b.strokeOpacityHighlight:b.strokeOpacity;if(e?b.drawFillHighlight:b.drawFill)g.fillStyle="rgba("+c+","+h+")";d&&(g.lineWidth=f,g.strokeStyle="rgba("+k+","+l+")");a=(e=a.map())?b.lng:b.x;e=e?b.lat:b.y;switch(b.shape){case "circle":g.arc(a+_offsetX,e+_offsetY,b.size,0,_circle,!1);break;case "rect":g.rect(a-b.width/2+_offsetX,e-b.height/2+_offsetY,b.width,b.height);
break;case "bezcurve":break;case "line":g.moveTo(a,e);g.lineTo(b.xEnd,b.yEnd);break;case "hex":c=b.width/2;b=b.height/2;h=c/2;g.moveTo(a-h+_offsetX,e-b+_offsetY);g.lineTo(a+h+_offsetX,e-b+_offsetY);g.lineTo(a+c+_offsetX,e+_offsetY);g.lineTo(a+h+_offsetX,e+b+_offsetY);g.lineTo(a-h+_offsetX,e+b+_offsetY);g.lineTo(a-c+_offsetX,e+_offsetY);g.lineTo(a-h+_offsetX,e-b+_offsetY);break;case "poly":b=b.shapePoints;for(a=b.length;a--;){e=b[a].length-1;for(g.moveTo(b[a][e][0],b[a][e][1]);e--;)g.lineTo(b[a][e][0],
b[a][e][1])}break;default:g.arc(a+_offsetX,e+_offsetY,b.size,0,_circle,!1)}}},f=function(a,c){var d="";if(a)d=a.toUpperCase(),g(c?"HIGHLIGHTMAIN"===d?_ctxHltMain:_ctxHltBack:"MAIN"===d?_ctxMain:_ctxBack,h,b);else for(var e=_sym.length,f=!1,k=!1,l=!1;e--;)switch(d=_sym[e].layer().toUpperCase(),d){case "BACK":k||(k=!0,g(_ctxBack,h,b),g(_ctxHltBack,h,b));break;case "MAIN":f||(f=!0,g(_ctxMain,h,b),g(_ctxHltMain,h,b));break;default:l||(l=!0,g(_ctxHltMain,h,b),g(_ctxHltBack,h,b))}},G=function(a,b,g){clearTimeout(_timeOut);
a=g?!0:!1;var e=_sym.length;_isAnimating=!0;if(k){pooch.supportsCanvas&&f(b,g);for(var c=0;c<e;++c)if(void 0!==b&&m!==b.toUpperCase()?a:1){var h=a?g.key:_sym[c].datum(),d=a?g.obj:_sym[c],l=a?[pooch.helpers.keyFromObj(g.key)]:d.order(),j=a?1:l.length,m=d.layer().toUpperCase(),n=a?"MAIN"===m?_ctxHltMain:_ctxHltBack:"MAIN"===m?_ctxMain:_ctxBack;if(d.batch()&&!a){var l=d.batchObj(),A;for(A in l){j=l[A].length;for(n.beginPath();j--;){var p=l[A][j],x=y(d,h,p,v,q),s;for(s in d.symAttrs())x[s]=x[s]||h[p][s];
B(d,x,n,a)}n.fill();n.stroke()}}else for(p=0;p<j;++p){if(_isDragging)return;n.beginPath();var x=y(d,h,l[p],v,q),r;for(r in d.symAttrs())x[r]=x[r]||h[l[p]][r];B(d,x,n,a);var t=a?x.drawStrokeHighlight:x.drawStroke;(a?x.drawFillHighlight:x.drawFill)&&n.fill();t&&n.stroke()}}v++;if(v<=q&&1<q)_timeOut=setTimeout(G,1);else{v=1;for(b=_sym.length;b--;)a||_sym[b].state(!0);_zoomControl&&_zoomControl.update();_isAnimating=!1}}},g=function(a,b,g){a&&a.clearRect(0,0,b,g)},A=function(){u=(p-j)/h;w=(n-m)/b},x=
function(){_center.x=j+(p-j)/2;_center.y=m+(n-m)/2},E=function(){return 0},H=function(){return _zoomLevels.length-1},I=function(g){if(!arguments.length)return a;if(g.val instanceof Array){for(var c=_projection?!0:!1,d=[],e=g.val.length,l=j-(p-j),f=p+(p-j),k=m-(n-m),q=n+(n-m);e--;){var A=g.val[e].length;d[e]=[];for(var x=!0;A--;){d[e][A]=[];var s=g.val[e][A][0],r=g.val[e][A][1],x=c?_projection(s,r,x):{x:s,y:r},s=b-b*((x.y-k)/(q-k));d[e][A][0]=h*((x.x-l)/(f-l));d[e][A][1]=s;x=!1}}return d}d=(c="width"===
g.dim)?h:b;l=p-j;f=n-m;e=c?j-l:m-f;l=c?p+l:n+f;return c?d*((g.val-e)/(l-e)):d-d*((g.val-e)/(l-e))};a.bounds=function(g){if(!arguments.length)return _bounds;if(g.length)a.axisMinX(g[3]),a.axisMaxX(g[1]),a.axisMinY(g[2]),a.axisMaxY(g[0]),s=g[3],r=g[2],t=g[0],z=void 0;else{var c=g.data().datum(),d=Number.MAX_VALUE,e=Number.MIN_VALUE,l=d,f=e,k;for(k in c)for(var j=c[k][g.shapeData()],m=j?j.length:0;m--;)for(var q=j[m].length;q--;){var n=j[m][q][0],p=j[m][q][1];n<l&&(l=n);n>f&&(f=n);p>e&&(e=p);p<d&&(d=
p)}c=b/h;k=Math.abs(e-d)/Math.abs(f-l);c<k?(c=(f-l)*(k-c)/2,l-=c,f+=c):k<c&&(c=(e-d)*(c-k)/2,d-=c,e+=c);a.axisMinX(l);a.axisMaxX(f);a.axisMinY(d);a.axisMaxY(e);s=l;z=f;r=d;t=e}A();x();return a};a.symbols=function(b){if(!arguments.length)return _sym;for(var g=b.length,c=!1,e=0;e<g;++e)_sym[e]=b[e],_sym[e].chart(a,I),_sym[e].state(!0),k?(_sym[e].popup()&&C(_sym[e].popup().house),!c&&_sym[e].interactive()&&(a.mouseMove(D),a.mouseOut(D),c=!0)):(_funcQueue.push({func:C,arg:_sym[e].popup().house}),_funcQueue.push({func:a.mouseMove,
arg:D}),_funcQueue.push({func:a.mouseOut,arg:D}));return a};a.width=function(b){if(!arguments.length)return h/3;h=3*b;k?(l({width:h}),_cvsHidden.width=h,_cvsHidden.style.width=h+"px"):_funcQueue.push({func:l,arg:{width:h}});return a};a.height=function(g){if(!arguments.length)return b/3;b=3*g;k?(l({height:b}),_cvsHidden.height=b,_cvsHidden.style.height=b+"px"):_funcQueue.push({func:l,arg:{height:b}});return a};a.axisMinX=function(b){if(!arguments.length)return j;j=b;return a};a.axisMaxX=function(b){if(!arguments.length)return p;
p=b;return a};a.axisMinY=function(b){if(!arguments.length)return m;m=b;return a};a.axisMaxY=function(b){if(!arguments.length)return n;n=b;return a};a.projection=function(b){if(!arguments.length)return _projection;null===b&&(_projection=null);"function"===typeof b&&(_projection=b);return a};a.reset=function(){j=s;p=z;m=r;n=t;x();a.zoom(0);return a};a.zoomControl=function(g){if(!arguments.length)return _zoomControl;_zoomControl=g;_zoomControl.target(a,E,H);k.appendChild(_zoomControl.domElem());_zoomControl.house(k);
var c=pooch.fetch("#pooch_container_"+d).dom(),l=!1,e={elem:null,init:function(){c.onmousedown=e.start;window.navigator.msPointerEnabled?(c.addEventListener("MSPointerDown",e.start,!1),"undefined"!==typeof c.style.msTouchAction&&(c.style.msTouchAction="none")):c.attachEvent&&c.setCapture?(l=!0,c.attachEvent("onmousedown",function(){e.start(window.event);return window.event.returnValue=!1})):c.addEventListener&&(c.addEventListener("touchstart",e.start,!1),c.addEventListener("mousedown",e.start,!1))},
start:function(a){_isDragging=!0;if(_symObjCur){var b="MAIN"===_symObjCur.layer().toUpperCase()?"highlightMain":"highlightBack";_symObjCur.popup().hide();f(b,!0);_symObjCur=_symCur=null}e.elem=this;var b=parseInt(e.elem.style.left,10),g=parseInt(e.elem.style.top,10);isNaN(b)&&(e.elem.style.left="0px");isNaN(g)&&(e.elem.style.top="0px");a=a?a:window.event;e.elem.mouseX=a.clientX;e.elem.mouseY=a.clientY;window.navigator.msPointerEnabled?(document.addEventListener("MSPointerDown",e.start,!1),"undefined"!==
typeof c.style.msTouchAction&&(c.style.msTouchAction="none")):c.attachEvent&&c.setCapture?(l=!0,document.attachEvent("onmousemove",function(){e.active(window.event);return window.event.returnValue=!1}),document.attachEvent("onmouseup",function(){e.end(window.event);return window.event.returnValue=!1})):c.addEventListener&&(document.addEventListener("touchmove",e.active,!1),document.addEventListener("touchend",e.end,!1),document.addEventListener("touchcancel",e.end,!1),document.addEventListener("touchleave",
e.end,!1),document.addEventListener("mousemove",e.active,!1),document.addEventListener("mouseup",e.end,!1),c.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&(l=!0));return!1},active:function(a){a.preventDefault();if(e.elem){_isDragging=!0;var b=parseInt(e.elem.style.left,10),g=parseInt(e.elem.style.top,10);a=a.changedTouches?a.changedTouches:[a];e.elem.style.left=b+(a[0].clientX-e.elem.mouseX)+"px";e.elem.style.top=g+(a[0].clientY-e.elem.mouseY)+"px";e.elem.mouseX=a[0].clientX;e.elem.mouseY=
a[0].clientY}return!1},end:function(){if(null!==e.elem){_isDragging=!1;var a=parseInt(e.elem.style.left,10),g=parseInt(e.elem.style.top,10),c=-(h/3),f=-(b/3),k=(a-c)*3*u,q=(g-f)*3*w;j-=k;p-=k;m+=q;n+=q;x();0!==a&&0!==g&&(G(),pooch.fetch("#pooch_container_"+d).css({top:f+"px",left:c+"px"}));l?document.releaseCapture():(document.removeEventListener("mousemove",e.active,!1),document.removeEventListener("mouseup",e.end,!1),document.removeEventListener("touchmove",e.active,!1),document.removeEventListener("touchend",
e.end,!1),document.removeEventListener("touchcancel",e.end,!1),document.removeEventListener("touchleave",e.end,!1));e.elem=null}}};e.init();_zoomControl.update();return a};a.zoomIn=function(){k&&_zoom+1<_zoomLevels.length&&a.zoom(_zoom+1);return a};a.zoomOut=function(){k&&(0===_zoom-1?a.reset():0<=_zoom-1&&a.zoom(_zoom-1));return a};a.zoom=function(b){if(!arguments.length)return _zoom;_zoom=b;j=_center.x-(z-s)/2/_zoomLevels[_zoom];p=_center.x+(z-s)/2/_zoomLevels[_zoom];m=_center.y-(t-r)/2/_zoomLevels[_zoom];
n=_center.y+(t-r)/2/_zoomLevels[_zoom];x();A();G();return a};a.zoomLevels=function(b){if(!arguments.length)return _zoomLevels;_zoomLevels=b;return a};a.draw=function(b,g){v=1;q=arguments.length?b:1;k?G(b,g):_funcQueue.push({func:G,arg:null});return a};a.mouseIgnore=function(b){if(!arguments.length)return _mouseIgnore;_mouseIgnore=b;return a};a.mouseMove=function(b){if("function"===typeof b){var g=function(a){b(a,_isAnimating||_isDragging||_mouseIgnore)};k?pooch.fetch("#pooch_mouse_"+d).mouseMove(g):
_funcQueue.push({func:b,arg:g})}return a};a.mouseOver=function(b){"function"===typeof b&&(k?pooch.fetch("#pooch_mouse_"+d).mouseOver(b):_funcQueue.push({func:a.mouseOver,arg:b}));return a};a.mouseDown=function(b){"function"===typeof b&&(k?pooch.fetch("#pooch_mouse_"+d).mouseDown(b):_funcQueue.push({func:a.mouseDown,arg:b}));return a};a.mouseOut=function(b){"function"===typeof b&&(k?pooch.fetch("#pooch_mouse_"+d).mouseOut(function(){D({localX:-2E4,localY:-2E4})}):_funcQueue.push({func:a.mouseOut,arg:b}));
return a};a.activeSymbol=function(){return a};a.house=function(g){if(!arguments.length)return k;var c=pooch.fetch(g).dom();if(c){k=c;for(var c=[],l="",e=_layersPre.length,f=_layersMain.length,j=_layersPost.length;e--;){var q=pooch.helpers.keyFromObj(_layersPre[e]),l=_layersPre[e][q];c.push("<"+_layersPre[e][q]+" id='pooch"+q+"_"+d+"' width='"+h+"' height='"+b+"' style='position:relative;top:0;left:0;width:"+h+"px;height:"+b+"px;'>")}if(pooch.supportsCanvas){for(;f--;)e=pooch.helpers.keyFromObj(_layersMain[f]),
c.push("<"+_layersMain[f][e]+" id='pooch"+e+"_"+d+"' width='"+h+"' height='"+b+"' style='position:absolute;top:0;left:0;width:"+h+"px;height:"+b+"px;'></"+_layersMain[f][e]+">");_cvsHidden=document.createElement("canvas");_cvsHidden.id="poochCvsHidden_"+d;_cvsHidden.width=h;_cvsHidden.height=b;_cvsHidden.style.width=h+"px";_cvsHidden.style.height=b+"px";_ctxHidden=_cvsHidden.getContext("2d")}for(;j--;)f=pooch.helpers.keyFromObj(_layersPost[j]),c.push("<"+_layersPost[j][f]+" id='pooch"+f+"_"+d+"' width='"+
h+"' height='"+b+"' style='position:absolute;top:0;left:0;width:"+h+"px;height:"+b+"px;'></"+_layersPost[j][f]+">");c.push("</"+l+">");c=c.join("");k.innerHTML=c;_ctxBack=pooch.fetch("#pooch_back_"+d).dom().getContext("2d");_ctxMain=pooch.fetch("#pooch_main_"+d).dom().getContext("2d");_ctxHltMain=pooch.fetch("#pooch_highlightMain_"+d).dom().getContext("2d");_ctxHltBack=pooch.fetch("#pooch_highlightBack_"+d).dom().getContext("2d");d="chart"+_chartNdx++;for(c=_funcQueue.length;c--;)_funcQueue[c].func(_funcQueue[c].arg);
_funcQueue=[]}return a};if(!arguments.length||void 0===c)return a;a.house(c);return a};_symbol=function(c){var a=this,b=function(a,b,c,d,l){var f=c-b;if(1===d||a===d)return c;switch(l){case "linear":return b+f*(a/d);case "easeIn":return f*(a/=d)*a*a+b;case "easeOut":return f*((a=a/d-1)*a*a+1)+b;case "easeInOut":return 1>(a/=d/2)?f/2*a*a*a+b:f/2*((a-=2)*a*a+2)+b;default:return b+f*(a/d)}},h=function(a,b,c){return c},k=function(a,c,d,l,f){c=c.split(",");var k=d.split(",");d=b(a,c[0]|0,k[0]|0,l,f)>>
0;var h=b(a,c[1]|0,k[1]|0,l,f)>>0;a=b(a,c[2]|0,k[2]|0,l,f)>>0;return d+","+h+","+a},d=function(a){var b=a+"_pooch_proj_y",c;for(c in p.datum())p.datum()[c][b]=pooch.helpers.latToMercator(p.datum()[c][a]);f.lat=function(a,g){return r({dim:"height",val:g[b]})}},v=function(a){var b=a+"_pooch_proj_x",c;for(c in p.datum())p.datum()[c][b]=pooch.helpers.lngToMercator(p.datum()[c][a]);f.lng=function(a,g){return r({dim:"width",val:g[b]})}},q=function(b){if(!arguments.length)return a;var c=b.length;for(j={};c--;){var d=
b[c];j[d]={};for(var l in f)j[d][l]=f[l];j[d].poochID=d;n[c]=d}return a};a.sort=function(){_data&&"function"===typeof f.size&&n.sort(function(a,b){var c=f.size(j[a],p.datum(j[a].poochID));sizeB=f.size(j[b],p.datum(j[b].poochID));return sizeB-c});return a};a.data=function(b){if(!arguments.length)return p;p=b;q(p.keys());for(var c=y.length;c--;)y[c].func(y[c].arg);y=[];return a};a.batch=function(b){if(!arguments.length)return t;t=b;return a};a.chart=function(b,c){if(!arguments.length)return z;z=b;r=
c;return a};a.symAttrs=function(b){if(!arguments.length)return f;for(var c in b)_attr[c]=b[c];return a};a.datum=function(a){return!arguments.length?j:j[a]};a.stepFunc=function(a){return!arguments.length?G:G[a]};a.popup=function(b){if(!arguments.length)return m;m=b;m.data(a,p);l=!0;return a};a.drawFill=function(b){if(!arguments.length)return f.drawFill;f.drawFill=b;return a};a.drawStroke=function(b){if(!arguments.length)return f.drawStroke;f.drawStroke=b;return a};a.drawFillHighlight=function(b){if(!arguments.length)return f.drawFillHighlight;
f.drawFillHighlight=b;return a};a.fillColorHighlight=function(b){if(!arguments.length)return f.fillColorHighlight;f.fillColorHighlight=b;return a};a.fillOpacityHighlight=function(b){if(!arguments.length)return f.fillOpacityHighlight;f.fillOpacityHighlight=b;return a};a.drawStrokeHighlight=function(b){if(!arguments.length)return f.drawStrokeHighlight;f.drawStrokeHighlight=b;return a};a.strokeWidthHighlight=function(b){if(!arguments.length)return f.strokeWidthHighlight;f.strokeWidthHighlight=b;return a};
a.strokeColorHighlight=function(b){if(!arguments.length)return f.strokeColorHighlight;f.strokeColorHighlight=b;return a};a.strokeOpacityHighlight=function(b){if(!arguments.length)return f.strokeOpacityHighlight;f.strokeOpacityHighlight=b;return a};a.fillColor=function(b){if(!arguments.length)return f.fillColor;f.fillColor=b;u=!0;return a};a.size=function(b){if(!arguments.length)return f.size;f.size=b;return a};a.width=function(b){if(!arguments.length)return f.width;"string"===typeof b?(F=b,f.width=
function(a,c){return c[b]}):f.width=b;return a};a.height=function(b){if(!arguments.length)return f.height;"string"===typeof b?(F=b,f.height=function(a,c){return c[b]}):f.height=b;return a};a.fillOpacity=function(b){if(!arguments.length)return f.fillOpacity;f.fillOpacity=b;return a};a.strokeOpacity=function(b){if(!arguments.length)return f.strokeOpacity;f.strokeOpacity=b;return a};a.strokeColor=function(b){if(!arguments.length)return f.strokeColor;f.strokeColor=b;return a};a.strokeWidth=function(b){if(!arguments.length)return f.strokeWidth;
f.strokeWidth=b;return a};a.interactive=function(b){if(!arguments.length)return l;l=b;return a};a.map=function(b){if(!arguments.length)return C;C=b;return a};a.order=function(b){if(!arguments.length)return n;n=b;return a};a.batchObj=function(b){if(!arguments.length){if(u){w={};for(var c in j){var d="string"===typeof a.fillColor()?a.fillColor():a.fillColor()(j[c],p.datum()[c]);w.hasOwnProperty(d)?w[d].push(j[c].poochID):w[d]=[j[c].poochID]}u=!1}return w}w=b;return a};a.x=function(b){if(!arguments.length)return f.x;
"string"===typeof b?(F=b,f.x=function(a,b){return r({dim:"width",val:b[F]})}):f.x=b;return a};a.y=function(b){if(!arguments.length)return f.y;f.y="string"===typeof b?function(a,c){return r({dim:"height",val:c[b]})}:b;return a};a.lat=function(b){if(!arguments.length)return f.lat;"string"===typeof b?p?d(b):y.push({func:d,arg:b}):f.lat=pooch.helpers.latToMercator(b);return a};a.lng=function(b){if(!arguments.length)return f.lng;"string"===typeof b?p?v(b):y.push({func:v,arg:b}):f.lng=pooch.helpers.lngToMercator(b);
return a};a.shapePoints=function(b){if(!arguments.length)return f.shapePoints;"string"===typeof b?(a.shapeData(b),p?f.shapePoints=function(a,c){return r({sym:a,val:c[b]})}:y.push({func:a.shapePoints,arg:b})):f.shapePoints=b;return a};a.shapeData=function(b){if(!arguments.length)return D;"string"===typeof b&&(D=b);return a};a.shape=function(b){if(!arguments.length)return f.shape;f.shape=b;return a};a.layer=function(b){if(!arguments.length)return s;s=b;return a};a.easing=function(b){if(!arguments.length)return f.easing;
f.easing=b;return a};a.state=function(){if(!arguments.length)return B;for(var a in j){B[a]={};for(var b in f)B[a][b]=j[a][b];B[a].poochID=a}return B};var j={},p=null,m=null,n=[],s="main",z=null,r=null,t=!1,u=!1,w={},l=!1,C=null,F=null,D="",y=[],B={},f={x:0,y:0,lat:0,lng:0,visible:!0,shape:"circle",easing:"easeInOut",drawFill:!0,drawStroke:!0,size:6,height:6,width:6,fillColor:"200,200,200",fillOpacity:1,strokeColor:"255,255,255",strokeOpacity:1,strokeWidth:1,shapePoints:[],drawFillHighlight:!0,fillColorHighlight:"200,200,200",
fillOpacityHighlight:1,drawStrokeHighlight:!0,strokeWidthHighlight:1,strokeColorHighlight:"0,0,0",strokeOpacityHighlight:1},G={poochID:h,x:b,y:b,lat:b,lng:b,visible:h,shape:h,easing:h,drawFill:h,drawStroke:h,size:b,height:b,width:b,fillColor:k,fillOpacity:b,strokeColor:k,strokeOpacity:b,strokeWidth:b,shapePoints:function(a,b,c){return c},drawFillHighlight:h,fillColorHighlight:h,fillOpacityHighlight:h,drawStrokeHighlight:h,strokeWidthHighlight:h,strokeColorHighlight:h,strokeOpacityHighlight:h};if(!arguments.length)return a;
a.shape(c);return a};_zoomControl=function(c){var a=this,b=null,h=null,k=null,d=null,v=null,q=null,j=null,p=null,m=null,n=null,s=null,z=0,r=0,t=[],u=function(a,b){if(d){var c=pooch.fetch(b).dom();if(c)return c}else t.push({func:a,arg:b});return null},w=function(){k.reset()},l=function(){k.zoomIn()},C=function(){k.zoomOut()},F=function(){},D=function(){};a.house=function(b){if(!arguments.length)return d;var c=pooch.fetch(b).dom();c&&(d=c,d.appendChild(h));for(c=t.length;c--;)t[c].func(t[c].arg);t=
[];v&&pooch.fetch(v).mouseDown(w);q&&pooch.fetch(q).mouseDown(l);j&&pooch.fetch(j).mouseDown(C);p&&pooch.fetch(p).mouseDown(F);m&&pooch.fetch(m).mouseDown(D);return a};a.domElem=function(b){if(!arguments.length)return h;h=b;return a};a.target=function(b,c,d){if(!arguments.length)return k;k=b;null!==c&&(n=c);null!==d&&(s=d);return a};a.reset=function(b){if(!arguments.length)return v;v=u(a.reset,b);return a};a.zoomIn=function(b){if(!arguments.length)return q;q=u(a.zoomIn,b);return a};a.zoomOut=function(b){if(!arguments.length)return j;
j=u(a.zoomOut,b);return a};a.handle=function(b){if(!arguments.length)return p;p=u(a.handle,b);return a};a.slider=function(b){if(!arguments.length)return m;m=u(a.slider,b);return a};a.top=function(b){if(!arguments.length)return z;z=b;pooch.fetch(h).css({top:z+"px"});return a};a.left=function(b){if(!arguments.length)return r;r=b;pooch.fetch(h).css({left:r+"px"});return a};a.update=function(){var b=null!==n?n():k.zoomMin(),c=null!==s?s():k.zoomMax(),b=parseInt(pooch.fetch(m).css("height"),10)/(c-b),
c=(c-k.zoom())*b>>0;pooch.fetch(p).css({top:c+"px"});return a};if(!arguments.length)return a;"string"===typeof c&&(null!==document.getElementById(c)&&void 0!==document.getElementById(c))&&(b=document.getElementById(c),h=document.createElement("div"),h.style.borderStyle="none",h.style.borderWidth="0px",h.style.position="absolute",h.style.display="block",h.innerHTML=b.innerHTML,a.domElem(h));return a};_popup=function(c){var a=this,b=null,h=null,k=null,d=null,v=0,q=0,j=0,p=24,m=0,n=0;a.house=function(c){if(!arguments.length)return k;
var d=pooch.fetch(c).dom();d&&(k=d,k.appendChild(b));return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(c){if(!arguments.length)return n;n=c;pooch.fetch(b).css({height:n+"px"});return a};a.offsetX=function(b){if(!arguments.length)return j;j=b;return a};a.offsetY=function(b){if(!arguments.length)return p;p=b;return a};a.x=function(c){if(!arguments.length)return v;v=c;pooch.fetch(b).css({left:v+"px"});return a};a.y=function(c){if(!arguments.length)return q;q=
c;pooch.fetch(b).css({top:q+"px"});return a};a.hide=function(){pooch.fetch(b).css({top:"-3000px",left:"-3000px"});return a};a.layout=function(c){if(!arguments.length)return b.innerHTML;for(var k=h.innerHTML,j=[{text:RegExp(/exec(\s*)\{(.*?)\}/g),chunk:RegExp(/\{(.*?)\}/),js:!0,obj:!1},{text:RegExp(/data\.(.*?)[^a-zA-Z0-9_]/g),chunk:RegExp(/\.(.*?)[^a-zA-Z0-9_]/),js:!1,obj:!0},{text:RegExp(/data(\s*)\[(.*?)\]/g),chunk:RegExp(/\[(.*?)\]/),js:!0,obj:!0}],q=j.length;q--;)for(var m=k.match(j[q].text),
n=m?m.length:0;n--;)var l=j[q].chunk.exec(m[n])[1].replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," "),p=!j[q].js?m[n].substr(5,m[n].length).match(/[^a-zA-Z0-9_]/):"",l=(j[q].js?j[q].obj?d.datum()[c][eval(l)]:eval(l):d.datum()[c][l])+p,k=k.replace(m[n],l);a.hide();b.innerHTML=k;a.width(b.clientWidth);a.height(b.clientHeight);return a};a.data=function(b,c){if(!arguments.length)return d;null!==c&&void 0!==c&&(d=c);return a};if(!arguments.length)return a;"string"===typeof c&&(null!==document.getElementById(c)&&
void 0!==document.getElementById(c))&&(h=document.getElementById(c),b=document.createElement("div"),b.style.borderStyle="none",b.style.borderWidth="0px",b.style.position="absolute",b.style.display="block");return a};_data=function(c){var a=this,b=[null],h={},k="",d=!1;a.key=function(c){if(!arguments.length)return k;var q=b.length,j=0,p=0,m=[];for(k=c;q--;){var n=b[q][c].length;m[q]={};n>p&&(j=q,p=n);for(;n--;)m[q][b[q][c][n]]=n}for(;p--;){n=b[j][c][p];h[n]={};for(var s in b[j])h[n][s]=b[j][s][p];
for(q=b.length;q--;)if(q!==j){var z=m[q][n],r;for(r in b[q])h[n][r]=b[q][r][z]}}d=!0;return a};a.keys=function(){var b=[],a;for(a in h)b.push(a);return b};a.datum=function(c,k){if(!arguments.length)return d?h:b;if(c)if(k)d?h[c]=k:b[c]=k;else return d?h[c]:b[c];return a};if(!arguments.length)return a;b=c;return a};pooch_map=function(c,a){var b=this,h=!0,k=!1,d=null,v=[],q=500,j=500,p=null,m={lat:37.090238,lng:-95.7129,zoom:4},n=5,s=18,z=2,r=null,t=null,u=[],w=null;b.house=function(a){if(!arguments.length)return w;
w=pooch.fetch(a).dom();return b};b.chart=function(a){if(!arguments.length)return r;r=a;return b};b.draw=function(a){if(r){var c=u.length;if(c){for(;c--;)u[c].func(u[c].arg);u=[]}r.draw(a)}else b.init();return b};b.zoomControl=function(a){if(!arguments.length)return t;t=a;t.target(b,null,null);return b};b.api=function(a){if(!arguments.length)return _api;h="GOOGLE"===a.toUpperCase()?!0:!1;k="BING"===a.toUpperCase()?!0:!1;return b};b.map=function(a){if(!arguments.length)return d;d=a;return b};b.symbols=
function(a){if(!arguments.length)return v;if(r){var c=a.length;r.symbols(a);for(var d=0;d<c;++d)v[d]=r.symbols()[d],v[d].map(b)}else u.push({func:b.symbols,arg:a});return b};b.reset=function(){d&&b.center({lat:m.lat,lng:m.lng}).zoom(m.zoom);return b};b.zoom=function(a){if(!arguments.length)return n;n=a;d&&(h&&d.getZoom()!=n?d.setZoom(n):k&&d.setView({zoom:n}));return b};b.zoomMax=function(a){if(!arguments.length)return s;s=a;return b};b.zoomMin=function(a){if(!arguments.length)return z;z=a;return b};
b.defaultView=function(a){if(!arguments.length)return m;"undefined"!==typeof a.lat&&(m.lat=a.lat);"undefined"!==typeof a.lng&&(m.lng=a.lng);"undefined"!==typeof a.zoom&&(m.zoom=a.zoom);return b};b.zoomIn=function(){if(d){if(h||k)n=d.getZoom();n+1<=s&&b.zoom(n+1)}return b};b.zoomOut=function(){if(d){if(h||k)n=d.getZoom();n-1>=z&&b.zoom(n-1)}return b};b.center=function(a){if(!arguments.length)return p;p=a;d&&h&&d.setCenter(new google.maps.LatLng(p.lat,p.lng));return b};b.width=function(a){if(!arguments.length)return w?
parseInt(pooch.fetch(w).css("width"),10):q;q=a;return b};b.height=function(a){if(!arguments.length)return w?parseInt(pooch.fetch(w).css("height"),10):j;j=a;return b};b.loadMap=function(){if(h){var a={disableDefaultUI:!0,zoom:m.zoom,center:new google.maps.LatLng(m.lat,m.lng),mapTypeControlOptions:{mapTypeIds:["poochStyle",google.maps.MapTypeId.ROADMAP]}},c=new google.maps.StyledMapType([{featureType:"all",elementType:"all",stylers:[{lightness:33},{gamma:0.8},{saturation:-61}]},{featureType:"road.local",
elementType:"geometry",stylers:[{saturation:-73},{lightness:33},{gamma:0.8},{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{saturation:-91},{gamma:0.8},{visibility:"simplified"},{lightness:100}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"},{saturation:-91},{gamma:0.8},{lightness:94}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},
{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"simplified"},{gamma:0.76}]}]);d=new google.maps.Map(w,a);d.mapTypes.set("poochStyle",c);d.setMapTypeId("poochStyle");new L(b)}else k&&(d=new Microsoft.Maps.Map(w,{credentials:"TODO add the option to initialize with credentials",center:new Microsoft.Maps.Location(m.lat,m.lng),mapTypeId:Microsoft.Maps.MapTypeId.road,showDashboard:!1,showScalebar:!1,zoom:m.zoom,height:b.height(),width:b.width()}));t&&(w.appendChild(t.domElem()),
t.house(w))};b.init=function(){if(h){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=pooch_initMapAPIs");document.body.appendChild(a)}else k&&(a=document.createElement("script"),a.setAttribute("type","text/javascript"),a.setAttribute("src","http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0&onScriptLoad=pooch_initMapAPIs"),document.body.appendChild(a));return b};if(!arguments.length)return b;
w=pooch.fetch(c).dom();return!w?b:pooch_baseMap=b};var L=function(c){var a=this,b=null,h=c.map(),k=c.chart(),d=null;a.prototype=new google.maps.OverlayView;var v=function(){b=h.getBounds();var d=a.prototype.getProjection(),j=google.maps.Point,p=new google.maps.LatLng(b.getNorthEast().lat(),b.getSouthWest().lng()),m=d.fromLatLngToDivPixel(p),p=d.fromDivPixelToLatLng(new j(m.x,m.y)),d=d.fromDivPixelToLatLng(new j(m.x+c.width(),m.y+c.height())),j=p.lng(),n=d.lng(),s=j;0<j&&0>n?s=-180+-1*(180-j):0>j&&
0>n&&j>n?s=-360+j:0<j&&(0<n&&j>n)&&(s=j-360);k.axisMinX(pooch.helpers.lngToMercator(s)).axisMaxX(pooch.helpers.lngToMercator(n)).axisMaxY(pooch.helpers.latToMercator(p.lat())).axisMinY(pooch.helpers.latToMercator(d.lat()));M?(pooch.fetch(k.house()).css({display:"none"}),c.draw(),setTimeout(function(){pooch.fetch(k.house()).css({top:m.y+"px",left:m.x+"px",display:"block"});c.zoom(h.getZoom());c.zoomControl().update()},1)):(c.draw(),pooch.fetch(k.house()).css({top:m.y+"px",left:m.x+"px",display:"block"}),
c.zoom(h.getZoom()),c.zoomControl().update())};a.bounds=function(c){if(!arguments.length)return b;b=c;return a};a.prototype.onAdd=function(){var b=document.createElement("div");b.style.borderStyle="none";b.style.borderWidth="0px";b.style.position="absolute";d=b;a.prototype.getPanes().overlayMouseTarget.appendChild(b);k=new pooch.chart(b);c.chart(k);k.height(c.height()).width(c.width());v();google.maps.event.addListener(h,"dragend",function(){v()});google.maps.event.addListener(h,"zoom_changed",function(){c.zoomControl()&&
c.zoomControl().slider()&&v()})};a.prototype.draw=function(){};a.prototype.onRemove=function(){d.parentNode.removeChild(d);d=null};a.prototype.setMap(h)};_fetch=function(c){var a=this,b=null,h=function(c){return!arguments.length?a:b.currentStyle?b.currentStyle[c]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(b,"")[c]:b.style[c]};a.css=function(c){if("string"===typeof c)return h(c);for(var d in c)if(void 0===_css2js[d]){var v=b.style,q;var j=d;q=
j.split("-");var p=q.length;if(1===p)q=q[0];else{for(var j="-"===j.charAt(0)?q[0].charAt(0).toUpperCase()+q[0].substring(1):q[0],m=1;m<p;m++)j+=q[m].charAt(0).toUpperCase()+q[m].substring(1);q=j}v[q]=c[d]}else b.style[_css2js[d]]=c[d];return a};a.dom=function(){return b};a.mouseOver=function(c){"function"===typeof c&&b.addEventListener("mouseover",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseMove=function(c){"function"===typeof c&&b.addEventListener("mousemove",function(a){_mouseEvent(b,a,
c)},!1);return a};a.mouseDown=function(c){"function"===typeof c&&b.addEventListener("mousedown",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseOut=function(c){"function"===typeof c&&b.addEventListener("mouseout",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseUp=function(c){"function"===typeof c&&b.addEventListener("mouseup",function(a){_mouseEvent(b,a,c)},!1);return a};a.removeEvent=function(){return a};if(!arguments.length||void 0===c)return a;if("string"===typeof c)"#"===c.substr(0,
1)?b=document.getElementById(c.substr(1,c.length)):"."===c.substr(0,1)?b=document.getElementsByClassName(c.substr(1,c.length))[0]:null!==document.getElementById(c)&&void 0!==document.getElementById(c)&&document.getElementById(c);else if(c.tagName||c.nodeName)b=c;return a};pooch.helpers={keyFromObj:function(c){for(var a in c)if(c.hasOwnProperty(a))return a;return null},formatNumber:function(c){c=c.toString();parts=c.toString().split(".");parts[0]=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");
return parts.join(".")},distanceToPoint:function(c,a,b,h){return Math.sqrt((c-=b)*c+(a-=h)*a)},latToMercator:function(c){c=Math.sin(c*(Math.PI/180));return 3189068.5*Math.log((1+c)/(1-c))},lngToMercator:function(c){return 111319.49079327169*c},indexOf:function(c,a){for(var b=c.length;b--;)if(c[b]===a)return b}};window.pooch_initMapAPIs=function(){pooch_baseMap.loadMap()};window.pooch_baseMap=null;var M="object"===typeof navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")?!0:!1;_chartNdx=0;_css2js=
{"float":"styleFloat","text-decoration: blink":"textDecorationBlink","text-decoration: line-through":"textDecorationLineThrough","text-decoration: none":"textDecorationNone","text-decoration: overline":"textDecorationOverline","text-decoration: underline":"textDecorationUnderline"};_mouseEvent=function(c,a,b){if(c.getBoundingClientRect){c=c.getBoundingClientRect();var h=c.top;a.localX=a.clientX-c.left;a.localY=a.clientY-h}b(a)}})();