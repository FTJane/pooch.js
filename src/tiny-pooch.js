(function(){pooch={version:"0.0.3",author:"Jeremy White",chart:function(c){return new K(c)},data:function(c){return new _data(c)},fetch:function(c){return _fetch(c)},map:function(c,a){return new pooch_map(c,a)},popup:function(c){return new _popup(c)},symbols:function(c){return new _symbol(c)},zoomControl:function(c){return new _zoomControl(c)}};pooch.supportsCanvas=!!document.createElement("canvas").getContext;var K=function(c){var a=this,b=0,m=0,j=null,e="chart"+_chartNdx,s=1,k=1,f=0,n=100,h=0,l=
100,t=0,w=100,r=0,u=100,x=1,p=1;_zoom=0;_zoomLevels=[1,2,4,8,16];_center={x:50,y:50};_offsetY=_offsetX=0;_cvsHidden=_ctxHidden=_ctxHltMain=_ctxMain=_ctxHltBack=_ctxBack=null;_isAnimating=!1;_isInteract=!0;_isDragging=_isMouseDown=!1;_projection=_zoomControl=null;_mouseIgnore=!1;_circle=2*Math.PI;_funcQueue=[];_sym=[];_symCur=_symObjCur=null;_symAction="over";_timeOut=null;_layersPre=[{_container:"div"}];_layersMain=[{_highlightMain:"canvas"},{_main:"canvas"},{_highlightBack:"canvas"},{_back:"canvas"}];
_layersPost=[{_mouse:"div"},{_popup:"div"}];var v=function(a){var b=pooch.helpers.keyFromObj(a),d=0===a[b]?0:"px";cssObj={};ndxPre=_layersPre.length;ndxMain=_layersMain.length;ndxPost=_layersPost.length;for(cssObj[b]=a[b]+d;ndxPre--;)d=pooch.helpers.keyFromObj(_layersPre[ndxPre]),d=pooch.fetch("#pooch"+d+"_"+e),d.css(cssObj).dom()[b]=a[b],"width"==b&&d.css({left:-(a.width/3)+"px"}),"height"==b&&d.css({top:-(a.height/3)+"px"});if(pooch.supportsCanvas)for(;ndxMain--;)d=pooch.helpers.keyFromObj(_layersMain[ndxMain]),
pooch.fetch("#pooch"+d+"_"+e).css(cssObj).dom()[b]=a[b];for(;ndxPost--;)d=pooch.helpers.keyFromObj(_layersPost[ndxPost]),pooch.fetch("#pooch"+d+"_"+e).css(cssObj).dom()[b]=a[b]},B=function(a){var b=pooch.fetch("#pooch_popup_"+e).dom();a(b)},I=function(a,d,E){var g=0,c=0,g=a.popup().offsetX(),c=a.popup().offsetY(),e=a.popup().width(),k=a.popup().height(),j=m/3,c=E-k-c-10<b/3?c:-k-c,g=d+g-e/2-10<j?j+-d+10:d+g+e/2+10>2*j?2*j-(d+e)-10:g+e/-2;a.popup().x(d+g).y(E+c)},y=function(a,d){if(!d){var E=a.localX,
g=a.localY,c=!1,e=!1,f=[],h=[],l=0,v=_sym.length,z=m,n=null,w=null;if(!_isMouseDown){for(var q=0;q<v;++q)if(_sym[q].interactive()){var r=_sym[q].state(),p;for(p in r){var D=0,t=0;switch(r[p].shape){case "circle":D=r[p].size;t=r[p].size;break;case "rect":case "hex":D=r[p].width/2;t=r[p].height/2;break;case "poly":a:{for(var c=r[p].shapePoints,u=[E,g],B=c.length;B--;){for(var x=c[B],G=!1,y=-1,H=x.length,C=H-1;++y<H;C=y)(x[y][1]<=u[1]&&u[1]<x[C][1]||x[C][1]<=u[1]&&u[1]<x[y][1])&&u[0]<(x[C][0]-x[y][0])*
(u[1]-x[y][1])/(x[C][1]-x[y][1])+x[y][0]&&(G=!G);if(G){c=!0;break a}}c=!1}break;case "custom":c=_sym[q].customShape().hitTest(r[p],E,g)}if("over"===_symAction){if(u=(B=_sym[q].map())?r[p].lng:r[p].x,B=B?r[p].lat:r[p].y,c||E<u+D&&E>u-D&&g<B+t&&g>B-t)f[l]=_sym[q],h[l]=r[p],e=!0,l++}else"closest"===_symAction&&(f[l]=_sym[q],h[l]=r[p],e=!0,l++)}}l=h.length;if(e){for(;l--;)h[l].drawFill&&(e=pooch.helpers.distanceToPoint(h[l].x,h[l].y,E,g),e<=z&&(n=f[l],w=h[l],z=e));h=n;symCur=w;if(_symCur!==symCur&&symCur){_symObjCur&&
(_symObjCur.popup().hide(),"MAIN"===_symObjCur.layer().toUpperCase()?A(_ctxHltMain,m,b):A(_ctxHltBack,m,b));w={};f="MAIN"===h.layer().toUpperCase()?"highlightMain":"highlightBack";_symObjCur=h;_symCur=symCur;w[_symCur.poochID]=_symCur;s=k=1;h=_symObjCur;z=_symObjCur.state();n=_symCur.poochID;if(!_symCur||z[n]!==_symCur[n])h.popup().layout(n),I(h,E,g);pooch.fetch(j).css({cursor:"pointer"});F(null,f,{obj:_symObjCur,key:w})}else _symCur===symCur&&symCur&&I(h,E,g)}else _symCur&&(_symObjCur.popup().hide(),
pooch.fetch(j).css({cursor:"default"}),"MAIN"===_symObjCur.layer().toUpperCase()?A(_ctxHltMain,m,b):A(_ctxHltBack,m,b)),_symCur=_symObjCur=null}}},D=function(a,b,d,g,c){var e={},m=a.state();if(1===g){var h=a.data().datum(),f=a.symAttrs();b[d].list=[];for(var j in f)b[d][j]="function"===typeof f[j]?f[j](b[d],h[d]):null!==f[j]?f[j]:b[d][j],b[d][j]!==m[d][j]&&b[d].list.push(j)}for(h=b[d].list.length;h--;)f=b[d].list[h],j=a.stepFunc(f),e[f]=j(g,m[d][f],b[d][f],c,b[d].easing);return e},G=function(a,b,
d,g,c){if(pooch.supportsCanvas){var e=c?d.fillColorHighlight:d.fillColor,m=c?d.fillOpacityHighlight:d.fillOpacity,j=c?d.drawStrokeHighlight:d.drawStroke,f=c?d.strokeWidthHighlight:d.strokeWidth,h=c?d.strokeColorHighlight:d.strokeColor,k=c?d.strokeOpacityHighlight:d.strokeOpacity;if(c?d.drawFillHighlight:d.drawFill)g.fillStyle="rgba("+e+","+m+")";j&&(g.lineWidth=f,g.strokeStyle="rgba("+h+","+k+")");c=(e=a.map())?d.lng:d.x;e=e?d.lat:d.y;switch(d.shape){case "circle":g.arc(c+_offsetX,e+_offsetY,d.size,
0,_circle,!1);break;case "rect":g.rect(c-d.width/2+_offsetX,e-d.height/2+_offsetY,d.width,d.height);break;case "bezcurve":break;case "line":g.moveTo(c,e);g.lineTo(d.xEnd,d.yEnd);break;case "hex":a=d.width/2;d=d.height/2;b=a/2;g.moveTo(c-b+_offsetX,e-d+_offsetY);g.lineTo(c+b+_offsetX,e-d+_offsetY);g.lineTo(c+a+_offsetX,e+_offsetY);g.lineTo(c+b+_offsetX,e+d+_offsetY);g.lineTo(c-b+_offsetX,e+d+_offsetY);g.lineTo(c-a+_offsetX,e+_offsetY);g.lineTo(c-b+_offsetX,e-d+_offsetY);break;case "poly":d=d.shapePoints;
for(a=d.length;a--;){b=d[a].length-1;for(g.moveTo(d[a][b][0],d[a][b][1]);b--;)g.lineTo(d[a][b][0],d[a][b][1])}break;case "custom":g=a.datum(b);a.data().datum(b);a.customShape().process(g,d,{x:_offsetX,y:_offsetY});break;default:g.arc(c+_offsetX,e+_offsetY,d.size,0,_circle,!1)}}},H=function(a,d){var c="";if(a)c=a.toUpperCase(),A(d?"HIGHLIGHTMAIN"===c?_ctxHltMain:_ctxHltBack:"MAIN"===c?_ctxMain:_ctxBack,m,b);else for(var g=_sym.length,e=!1,j=!1,f=!1;g--;)switch(c=_sym[g].layer().toUpperCase(),c){case "BACK":j||
(j=!0,A(_ctxBack,m,b),A(_ctxHltBack,m,b));break;case "MAIN":e||(e=!0,A(_ctxMain,m,b),A(_ctxHltMain,m,b));break;default:f||(f=!0,A(_ctxHltMain,m,b),A(_ctxHltBack,m,b))}},F=function(a,d,b){clearTimeout(_timeOut);var c=(a=b?!0:!1)?1:_sym.length;_isAnimating=!0;if(j){pooch.supportsCanvas&&H(d,b);for(var e=0;e<c;++e)if(void 0!==d&&z!==d.toUpperCase()?a:1){var m=a?b.key:_sym[e].datum(),f=a?b.obj:_sym[e],h=a?[pooch.helpers.keyFromObj(b.key)]:f.order(),l=a?1:h.length,z=f.layer().toUpperCase(),v=a?"MAIN"===
z?_ctxHltMain:_ctxHltBack:"MAIN"===z?_ctxMain:_ctxBack,n=f.batch()?!0:!1;f.context(v);if(n&&!a){var h=f.batchObj(),r;for(r in h){l=h[r].length;for(v.beginPath();l--;){var n=h[r][l],p=D(f,m,n,s,k),q;for(q in f.symAttrs())p[q]=p[q]||m[n][q];G(f,n,p,v,a)}v.fill();v.stroke()}}else for(n=0;n<l;++n){v.beginPath();var p=D(f,m,h[n],s,k),w;for(w in f.symAttrs())p[w]=p[w]||m[h[n]][w];G(f,h[n],p,v,a);var u=a?p.drawStrokeHighlight:p.drawStroke;(a?p.drawFillHighlight:p.drawFill)&&v.fill();u&&v.stroke()}}s++;if(s<=
k&&1<k)_timeOut=setTimeout(F,1);else{s=1;for(d=_sym.length;d--;)a||_sym[d].state(!0);_zoomControl&&_zoomControl.update();_isAnimating=!1}}},A=function(a,d,b){a&&a.clearRect(0,0,d,b)},C=function(){x=(n-f)/m;p=(l-h)/b},q=function(){_center.x=f+(n-f)/2;_center.y=h+(l-h)/2},J=function(){return 0},d=function(){return _zoomLevels.length-1},z=function(d){if(!arguments.length)return a;if(d.val instanceof Array){for(var c=_projection?!0:!1,e=[],g=d.val.length,j=f-(n-f),k=n+(n-f),v=h-(l-h),z=l+(l-h);g--;){var p=
d.val[g].length;e[g]=[];for(var s=!0;p--;){e[g][p]=[];var r=d.val[g][p][0],q=d.val[g][p][1],s=c?_projection(r,q,s):{x:r,y:q},r=b-b*((s.y-v)/(z-v));e[g][p][0]=m*((s.x-j)/(k-j));e[g][p][1]=r;s=!1}}return e}e=(c="width"===d.dim)?m:b;j=n-f;k=l-h;g=c?f-j:h-k;j=c?n+j:l+k;return c?e*((d.val-g)/(j-g)):e-e*((d.val-g)/(j-g))};a.bounds=function(d){if(!arguments.length)return _bounds;if(d.length)a.axisMinX(d[3]),a.axisMaxX(d[1]),a.axisMinY(d[2]),a.axisMaxY(d[0]),t=d[3],r=d[2],u=d[0],w=void 0;else{var c=d.data().datum(),
e=Number.MAX_VALUE,g=Number.MIN_VALUE,f=e,j=g,h;for(h in c)for(var k=c[h][d.shapeData()],l=k?k.length:0;l--;)for(var v=k[l].length;v--;){var z=k[l][v][0],p=k[l][v][1];z<f&&(f=z);z>j&&(j=z);p>g&&(g=p);p<e&&(e=p)}c=b/m;h=Math.abs(g-e)/Math.abs(j-f);c<h?(c=(j-f)*(h-c)/2,f-=c,j+=c):h<c&&(c=(g-e)*(c-h)/2,e-=c,g+=c);a.axisMinX(f);a.axisMaxX(j);a.axisMinY(e);a.axisMaxY(g);t=f;w=j;r=e;u=g}C();q();return a};a.symbols=function(d){if(!arguments.length)return _sym;for(var b=d.length,c=!1,e=0;e<b;++e)_sym[e]=
d[e],_sym[e].chart(a,z),_sym[e].state(!0),j?(_sym[e].popup()&&B(_sym[e].popup().house),!c&&_sym[e].interactive()&&(a.mouseMove(y),a.mouseOut(y),c=!0)):(_funcQueue.push({func:B,arg:_sym[e].popup().house}),_funcQueue.push({func:a.mouseMove,arg:y}),_funcQueue.push({func:a.mouseOut,arg:y}));return a};a.width=function(d){if(!arguments.length)return m/3;m=3*d;j?(v({width:m}),_cvsHidden.width=m,_cvsHidden.style.width=m+"px"):_funcQueue.push({func:v,arg:{width:m}});return a};a.height=function(d){if(!arguments.length)return b/
3;b=3*d;j?(v({height:b}),_cvsHidden.height=b,_cvsHidden.style.height=b+"px"):_funcQueue.push({func:v,arg:{height:b}});return a};a.axisMinX=function(d){if(!arguments.length)return f;f=d;return a};a.axisMaxX=function(d){if(!arguments.length)return n;n=d;return a};a.axisMinY=function(d){if(!arguments.length)return h;h=d;return a};a.axisMaxY=function(d){if(!arguments.length)return l;l=d;return a};a.projection=function(d){if(!arguments.length)return _projection;null===d&&(_projection=null);"function"===
typeof d&&(_projection=d);return a};a.reset=function(){f=t;n=w;h=r;l=u;q();a.zoom(0);return a};a.zoomControl=function(c){if(!arguments.length)return _zoomControl;_zoomControl=c;_zoomControl.target(a,J,d);j.appendChild(_zoomControl.domElem());_zoomControl.house(j);var k=pooch.fetch("#pooch_container_"+e).dom(),v=!1,g={elem:null,init:function(){k.onmousedown=g.start;window.navigator.msPointerEnabled?(k.addEventListener("MSPointerDown",g.start,!1),"undefined"!==typeof k.style.msTouchAction&&(k.style.msTouchAction=
"none")):k.attachEvent&&k.setCapture?(v=!0,k.attachEvent("onmousedown",function(){g.start(window.event);return window.event.returnValue=!1})):k.addEventListener&&(k.addEventListener("touchstart",g.start,!1),k.addEventListener("mousedown",g.start,!1))},start:function(a){_isDragging=!0;if(_symObjCur){var d="MAIN"===_symObjCur.layer().toUpperCase()?"highlightMain":"highlightBack";_symObjCur.popup().hide();H(d,!0);_symObjCur=_symCur=null}g.elem=this;var d=parseInt(g.elem.style.left,10),b=parseInt(g.elem.style.top,
10);isNaN(d)&&(g.elem.style.left="0px");isNaN(b)&&(g.elem.style.top="0px");"function"===typeof window.webkitURL&&(g.elem.style.webkitTransform="matrix(1, 0, 0, 1, 0, 0)");a=a?a:window.event;g.elem.mouseX=a.clientX;g.elem.mouseY=a.clientY;window.navigator.msPointerEnabled?(document.addEventListener("MSPointerDown",g.start,!1),"undefined"!==typeof k.style.msTouchAction&&(k.style.msTouchAction="none")):k.attachEvent&&k.setCapture?(v=!0,document.attachEvent("onmousemove",function(){g.active(window.event);
return window.event.returnValue=!1}),document.attachEvent("onmouseup",function(){g.end(window.event);return window.event.returnValue=!1})):k.addEventListener&&(document.addEventListener("touchmove",g.active,!1),document.addEventListener("touchend",g.end,!1),document.addEventListener("touchcancel",g.end,!1),document.addEventListener("touchleave",g.end,!1),document.addEventListener("mousemove",g.active,!1),document.addEventListener("mouseup",g.end,!1),k.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&
(v=!0));return!1},active:function(a){a.preventDefault();if(g.elem){_isDragging=!0;a=a.changedTouches?a.changedTouches:[a];if("function"===typeof window.webkitURL){var d=pooch.helpers.parseWebkitMatrix(g.elem.style.webkitTransform),b=parseInt(d.tX,10)+(a[0].clientX-g.elem.mouseX),d=parseInt(d.tY,10)+(a[0].clientY-g.elem.mouseY);g.elem.style.webkitTransform="matrix(1, 0, 0, 1, "+b+", "+d+")"}else b=parseInt(g.elem.style.left,10)+(a[0].clientX-g.elem.mouseX),d=parseInt(g.elem.style.top,10)+(a[0].clientY-
g.elem.mouseY),g.elem.style.left=b+"px",g.elem.style.top=d+"px";g.elem.mouseX=a[0].clientX;g.elem.mouseY=a[0].clientY}return!1},end:function(){if(null!==g.elem){_isDragging=!1;var a,d,c=-(m/3),j=-(b/3);"function"===typeof window.webkitURL?(d=pooch.helpers.parseWebkitMatrix(g.elem.style.webkitTransform),a=c+parseInt(d.tX,10),d=j+parseInt(d.tY,10)):(a=parseInt(g.elem.style.left,10),d=parseInt(g.elem.style.top,10));var k=(a-c)*3*x,z=(d-j)*3*p;f-=k;n-=k;h+=z;l+=z;q();0!==a&&0!==d&&(F(),"function"===typeof window.webkitURL?
g.elem.style.webkitTransform="matrix(1, 0, 0, 1, 0, 0)":pooch.fetch("#pooch_container_"+e).css({top:j+"px",left:c+"px"}));v?document.releaseCapture():(document.removeEventListener("mousemove",g.active,!1),document.removeEventListener("mouseup",g.end,!1),document.removeEventListener("touchmove",g.active,!1),document.removeEventListener("touchend",g.end,!1),document.removeEventListener("touchcancel",g.end,!1),document.removeEventListener("touchleave",g.end,!1));g.elem=null}}};g.init();_zoomControl.update();
return a};a.zoomIn=function(){j&&_zoom+1<_zoomLevels.length&&a.zoom(_zoom+1);return a};a.zoomOut=function(){j&&(0===_zoom-1?a.reset():0<=_zoom-1&&a.zoom(_zoom-1));return a};a.zoom=function(d){if(!arguments.length)return _zoom;_zoom=d;f=_center.x-(w-t)/2/_zoomLevels[_zoom];n=_center.x+(w-t)/2/_zoomLevels[_zoom];h=_center.y-(u-r)/2/_zoomLevels[_zoom];l=_center.y+(u-r)/2/_zoomLevels[_zoom];q();C();F();return a};a.zoomLevels=function(d){if(!arguments.length)return _zoomLevels;_zoomLevels=d;return a};
a.draw=function(d,b){s=1;k=arguments.length?d:1;j?F(d,b):_funcQueue.push({func:F,arg:null});return a};a.mouseIgnore=function(d){if(!arguments.length)return _mouseIgnore;_mouseIgnore=d;return a};a.mouseMove=function(d){if("function"===typeof d){var b=function(a){d(a,_isAnimating||_isDragging||_mouseIgnore)};j?pooch.fetch("#pooch_mouse_"+e).mouseMove(b):_funcQueue.push({func:d,arg:b})}return a};a.mouseOver=function(d){"function"===typeof d&&(j?pooch.fetch("#pooch_mouse_"+e).mouseOver(d):_funcQueue.push({func:a.mouseOver,
arg:d}));return a};a.mouseDown=function(d){"function"===typeof d&&(j?pooch.fetch("#pooch_mouse_"+e).mouseDown(d):_funcQueue.push({func:a.mouseDown,arg:d}));return a};a.mouseOut=function(d){"function"===typeof d&&(j?pooch.fetch("#pooch_mouse_"+e).mouseOut(function(){y({localX:-2E4,localY:-2E4})}):_funcQueue.push({func:a.mouseOut,arg:d}));return a};a.activeSymbol=function(d){if(!arguments.length)return _symCur;_symCur=d;return a};a.house=function(d){if(!arguments.length)return j;var c=pooch.fetch(d).dom();
if(c){j=c;for(var c=[],f="",g=_layersPre.length,k=_layersMain.length,h=_layersPost.length;g--;){var l=pooch.helpers.keyFromObj(_layersPre[g]),f=_layersPre[g][l];c.push("<"+_layersPre[g][l]+" id='pooch"+l+"_"+e+"' width='"+m+"' height='"+b+"' style='position:relative;top:0;left:0;width:"+m+"px;height:"+b+"px;'>")}if(pooch.supportsCanvas){for(;k--;)g=pooch.helpers.keyFromObj(_layersMain[k]),c.push("<"+_layersMain[k][g]+" id='pooch"+g+"_"+e+"' width='"+m+"' height='"+b+"' style='position:absolute;top:0;left:0;width:"+
m+"px;height:"+b+"px;'></"+_layersMain[k][g]+">");_cvsHidden=document.createElement("canvas");_cvsHidden.id="poochCvsHidden_"+e;_cvsHidden.width=m;_cvsHidden.height=b;_cvsHidden.style.width=m+"px";_cvsHidden.style.height=b+"px";_ctxHidden=_cvsHidden.getContext("2d")}for(;h--;)k=pooch.helpers.keyFromObj(_layersPost[h]),c.push("<"+_layersPost[h][k]+" id='pooch"+k+"_"+e+"' width='"+m+"' height='"+b+"' style='position:absolute;top:0;left:0;width:"+m+"px;height:"+b+"px;'></"+_layersPost[h][k]+">");c.push("</"+
f+">");c=c.join("");j.innerHTML=c;_ctxBack=pooch.fetch("#pooch_back_"+e).dom().getContext("2d");_ctxMain=pooch.fetch("#pooch_main_"+e).dom().getContext("2d");_ctxHltMain=pooch.fetch("#pooch_highlightMain_"+e).dom().getContext("2d");_ctxHltBack=pooch.fetch("#pooch_highlightBack_"+e).dom().getContext("2d");e="chart"+_chartNdx++;for(c=_funcQueue.length;c--;)_funcQueue[c].func(_funcQueue[c].arg);_funcQueue=[]}return a};if(!arguments.length||void 0===c)return a;a.house(c);return a};_symbol=function(c){var a=
this,b=function(a,b,c,e,k){var g=c-b;if(!e||1===e||a===e)return c;switch(k){case "linear":return b+g*(a/e);case "easeIn":return g*(a/=e)*a*a+b;case "easeOut":return g*((a=a/e-1)*a*a+1)+b;case "easeInOut":return 1>(a/=e/2)?g/2*a*a*a+b:g/2*((a-=2)*a*a+2)+b;default:return b+g*(a/e)}},m=function(a,b,c){return c},j=function(a,c,e,k,f){if(!k||1===k||a===k)return e;c=c.split(",");var g=e.split(",");e=b(a,c[0]|0,g[0]|0,k,f)>>0;var j=b(a,c[1]|0,g[1]|0,k,f)>>0;a=b(a,c[2]|0,g[2]|0,k,f)>>0;return e+","+j+","+
a},e=function(a){var b=a+"_pooch_proj_y",c;for(c in l.datum())l.datum()[c][b]=pooch.helpers.latToMercator(l.datum()[c][a]);q.lat=function(a,d){return p({dim:"height",val:d[b]})}},s=function(a){var b=a+"_pooch_proj_x",c;for(c in l.datum())l.datum()[c][b]=pooch.helpers.lngToMercator(l.datum()[c][a]);q.lng=function(a,d){return p({dim:"width",val:d[b]})}},k=function(d){if(!arguments.length)return a;var b=d.length;for(h={};b--;){var c=d[b];h[c]={};for(var e in q)h[c][e]=q[e];h[c].poochID=c;r[b]=c}return a},
f=function(d,b){if(1===arguments.length)return q[d];n(b)?d=function(a,d){return d[b]}:q[d]=b;return a},n=function(d){var b=null,c;for(c in a.state()){b=c;break}return"string"===typeof d&&"undefined"!==typeof l.datum(b)[d]};a.sort=function(){l&&"function"===typeof q.size&&r.sort(function(a,b){var c=q.size(h[a],l.datum(h[a].poochID));sizeB=q.size(h[b],l.datum(h[b].poochID));return sizeB-c});return a};a.data=function(d){if(!arguments.length)return l;l=d;k(l.keys());for(var b=A.length;b--;)A[b].func(A[b].arg);
A=[];return a};a.batch=function(d){if(!arguments.length)return v;v=d;return a};a.chart=function(d,b){if(!arguments.length)return x;x=d;p=b;return a};a.symAttrs=function(d){if(!arguments.length)return q;for(var b in d)_attr[b]=d[b];return a};a.datum=function(a){return!arguments.length?h:h[a]};a.stepFunc=function(a){return!arguments.length?J:J[a]};a.popup=function(d){if(!arguments.length)return t;t=d;t.data(a,l);D=!0;return a};a.drawFill=function(a){return f("drawFill",a)};a.drawStroke=function(a){return f("drawStroke",
a)};a.drawFillHighlight=function(a){return f("drawFillHighlight",a)};a.fillColorHighlight=function(a){return f("fillColorHighlight",a)};a.fillOpacityHighlight=function(a){return f("fillOpacityHighlight",a)};a.drawStrokeHighlight=function(a){return f("drawStrokeHighlight",a)};a.strokeWidthHighlight=function(a){return f("strokeWidthHighlight",a)};a.strokeColorHighlight=function(a){return f("strokeColorHighlight",a)};a.strokeOpacityHighlight=function(a){return f("strokeOpacityHighlight",a)};a.size=function(a){return f("size",
a)};a.fillOpacity=function(a){return f("fillOpacity",a)};a.strokeOpacity=function(a){return f("strokeOpacity",a)};a.strokeColor=function(a){return f("strokeColor",a)};a.strokeWidth=function(a){return f("strokeWidth",a)};a.shapeData=function(b){if(!arguments.length)return F;"string"===typeof b&&(F=b);return a};a.shape=function(b){if(!arguments.length)return q.shape;q.shape=b;return a};a.order=function(b){if(!arguments.length)return r;r=b;return a};a.layer=function(b){if(!arguments.length)return u;
u=b;return a};a.easing=function(b){if(!arguments.length)return q.easing;q.easing=b;return a};a.fillColor=function(b){if(!arguments.length)return q.fillColor;q.fillColor=b;B=!0;return a};a.width=function(b){if(!arguments.length)return q.width;"string"===typeof b?(H=b,q.width=function(a,c){return c[b]}):q.width=b;return a};a.height=function(b){if(!arguments.length)return q.height;q.height="string"===typeof b?function(a,c){return c[b]}:b;return a};a.interactive=function(b){if(!arguments.length)return D;
D=b;return a};a.map=function(b){if(!arguments.length)return G;G=b;return a};a.context=function(b){if(!arguments.length)return w;w=b;return a};a.customShape=function(b){if(!arguments.length)return I;I=b;return a};a.batchObj=function(b){if(!arguments.length){if(B){y={};for(var c in h){var e="string"===typeof a.fillColor()?a.fillColor():a.fillColor()(h[c],l.datum()[c]);y.hasOwnProperty(e)?y[e].push(h[c].poochID):y[e]=[h[c].poochID]}B=!1}return y}y=b;return a};a.x=function(b){if(!arguments.length)return q.x;
n(b)?(H=b,q.x=function(a,b){return p({dim:"width",val:b[H]})}):q.x=function(){return p({dim:"width",val:b})};return a};a.y=function(b){if(!arguments.length)return q.y;q.y=n(b)?function(a,c){return p({dim:"height",val:c[b]})}:function(){return p({dim:"height",val:b})};return a};a.lat=function(b){if(!arguments.length)return q.lat;"string"===typeof b?l?e(b):A.push({func:e,arg:b}):q.lat=pooch.helpers.latToMercator(b);return a};a.lng=function(b){if(!arguments.length)return q.lng;"string"===typeof b?l?
s(b):A.push({func:s,arg:b}):q.lng=pooch.helpers.lngToMercator(b);return a};a.shapePoints=function(b){if(!arguments.length)return q.shapePoints;"string"===typeof b?(a.shapeData(b),l?q.shapePoints=function(a,c){return p({sym:a,val:c[b]})}:A.push({func:a.shapePoints,arg:b})):q.shapePoints=b;return a};a.state=function(){if(!arguments.length)return C;for(var a in h){C[a]={};for(var b in q)C[a][b]=h[a][b];C[a].poochID=a}return C};var h={},l=null,t=null,w=null,r=[],u="main",x=null,p=null,v=!1,B=!1,I=null,
y={},D=!1,G=null,H=null,F="",A=[],C={},q={symbolGroup:a,x:0,y:0,lat:0,lng:0,visible:!0,shape:"circle",easing:"easeInOut",drawFill:!0,drawStroke:!0,size:6,height:6,width:6,fillColor:"200,200,200",fillOpacity:1,strokeColor:"255,255,255",strokeOpacity:1,strokeWidth:1,shapePoints:[],drawFillHighlight:!0,fillColorHighlight:"200,200,200",fillOpacityHighlight:1,drawStrokeHighlight:!0,strokeWidthHighlight:1,strokeColorHighlight:"0,0,0",strokeOpacityHighlight:1},J={symbolGroup:m,poochID:m,x:b,y:b,lat:b,lng:b,
visible:m,shape:m,easing:m,drawFill:m,drawStroke:m,size:b,height:b,width:b,fillColor:j,fillOpacity:b,strokeColor:j,strokeOpacity:b,strokeWidth:b,shapePoints:function(a,b,c){return c},drawFillHighlight:m,fillColorHighlight:m,fillOpacityHighlight:m,drawStrokeHighlight:m,strokeWidthHighlight:m,strokeColorHighlight:m,strokeOpacityHighlight:m};if(!arguments.length)return a;a.shape(c);return a};_zoomControl=function(c){var a=this,b=null,m=null,j=null,e=null,s=null,k=null,f=null,n=null,h=null,l=null,t=null,
w=0,r=0,u=[],x=function(a,b){if(e){var c=pooch.fetch(b).dom();if(c)return c}else u.push({func:a,arg:b});return null},p=function(){j.reset()},v=function(){j.zoomIn()},B=function(){j.zoomOut()},I=function(){},y=function(){};a.house=function(b){if(!arguments.length)return e;var c=pooch.fetch(b).dom();c&&(e=c,e.appendChild(m));for(c=u.length;c--;)u[c].func(u[c].arg);u=[];s&&pooch.fetch(s).mouseDown(p);k&&pooch.fetch(k).mouseDown(v);f&&pooch.fetch(f).mouseDown(B);n&&pooch.fetch(n).mouseDown(I);h&&pooch.fetch(h).mouseDown(y);
return a};a.domElem=function(b){if(!arguments.length)return m;m=b;return a};a.target=function(b,c,e){if(!arguments.length)return j;j=b;null!==c&&(l=c);null!==e&&(t=e);return a};a.reset=function(b){if(!arguments.length)return s;s=x(a.reset,b);return a};a.zoomIn=function(b){if(!arguments.length)return k;k=x(a.zoomIn,b);return a};a.zoomOut=function(b){if(!arguments.length)return f;f=x(a.zoomOut,b);return a};a.handle=function(b){if(!arguments.length)return n;n=x(a.handle,b);return a};a.slider=function(b){if(!arguments.length)return h;
h=x(a.slider,b);return a};a.top=function(b){if(!arguments.length)return w;w=b;pooch.fetch(m).css({top:w+"px"});return a};a.left=function(b){if(!arguments.length)return r;r=b;pooch.fetch(m).css({left:r+"px"});return a};a.update=function(){var b=null!==l?l():j.zoomMin(),c=null!==t?t():j.zoomMax(),b=parseInt(pooch.fetch(h).css("height"),10)/(c-b),c=(c-j.zoom())*b>>0;pooch.fetch(n).css({top:c+"px"});return a};if(!arguments.length)return a;"string"===typeof c&&(null!==document.getElementById(c)&&void 0!==
document.getElementById(c))&&(b=document.getElementById(c),m=document.createElement("div"),m.style.borderStyle="none",m.style.borderWidth="0px",m.style.position="absolute",m.style.display="block",m.innerHTML=b.innerHTML,a.domElem(m));return a};_popup=function(c){var a=this,b=null,m=null,j=null,e=null,s=null,k=0,f=0,n=0,h=24,l=0,t=0;a.house=function(c){if(!arguments.length)return j;var e=pooch.fetch(c).dom();e&&(j=e,j.appendChild(b));return a};a.width=function(b){if(!arguments.length)return l;l=b;
return a};a.height=function(c){if(!arguments.length)return t;t=c;pooch.fetch(b).css({height:t+"px"});return a};a.offsetX=function(b){if(!arguments.length)return n;n=b;return a};a.offsetY=function(b){if(!arguments.length)return h;h=b;return a};a.x=function(c){if(!arguments.length)return k;k=c;pooch.fetch(b).css({left:k+"px"});return a};a.y=function(c){if(!arguments.length)return f;f=c;pooch.fetch(b).css({top:f+"px"});return a};a.hide=function(){pooch.fetch(b).css({top:"-3000px",left:"-3000px"});return a};
a.layout=function(c){if(!arguments.length)return b.innerHTML;for(var k=m.innerHTML,f=[{text:RegExp(/exec(\s*)\{(.*?)\}/g),chunk:RegExp(/\{(.*?)\}/),js:!0,obj:!1},{text:RegExp(/data\.(.*?)[^a-zA-Z0-9_]/g),chunk:RegExp(/\.(.*?)[^a-zA-Z0-9_]/),js:!1,obj:!0},{text:RegExp(/data(\s*)\[(.*?)\]/g),chunk:RegExp(/\[(.*?)\]/),js:!0,obj:!0},{text:RegExp(/sym\.(.*?)[^a-zA-Z0-9_]/g),chunk:RegExp(/\.(.*?)[^a-zA-Z0-9_]/),js:!1,obj:!0},{text:RegExp(/sym(\s*)\[(.*?)\]/g),chunk:RegExp(/\[(.*?)\]/),js:!0,obj:!0}],j=
f.length;j--;)for(var h=k.match(f[j].text),l=h?h.length:0;l--;)var n=f[j].chunk.exec(h[l])[1].replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," "),t="dat"===h[0].substr(0,3)?5:"sym"===h[0].substr(0,3)?3:0,y=!f[j].js?h[l].substr(t,h[l].length).match(/[^a-zA-Z0-9_]/):"",n=(f[j].js?f[j].obj?5===t?e.datum()[c][eval(n)]:s.datum()[c][eval(n)]:eval(n):5===t?e.datum()[c][n]:s.datum()[c][n])+y,k=k.replace(h[l],n);a.hide();b.innerHTML=k;a.width(b.clientWidth);a.height(b.clientHeight);return a};a.data=
function(b,c){if(!arguments.length)return e;null!==b&&void 0!==b&&(s=b);null!==c&&void 0!==c&&(e=c);return a};if(!arguments.length)return a;"string"===typeof c&&(null!==document.getElementById(c)&&void 0!==document.getElementById(c))&&(m=document.getElementById(c),b=document.createElement("div"),b.style.borderStyle="none",b.style.borderWidth="0px",b.style.position="absolute",b.style.display="block");return a};_data=function(c){var a=this,b=[null],m={},j="",e=!1;a.key=function(c){if(!arguments.length)return j;
var k=b.length,f=0,n=0,h=[];for(j=c;k--;){var l=b[k][c].length;h[k]={};l>n&&(f=k,n=l);for(;l--;)h[k][b[k][c][l]]=l}for(;n--;){l=b[f][c][n];m[l]={};for(var t in b[f])m[l][t]=b[f][t][n];for(k=b.length;k--;)if(k!==f){var w=h[k][l],r;for(r in b[k])m[l][r]=b[k][r][w]}}e=!0;return a};a.keys=function(){var a=[],b;for(b in m)a.push(b);return a};a.datum=function(c,k){if(!arguments.length)return e?m:b;if(c)if(k)e?m[c]=k:b[c]=k;else return e?m[c]:b[c];return a};if(!arguments.length)return a;b=c;return a};pooch_map=
function(c,a){var b=this,m=!0,j=!1,e=null,s=[],k=500,f=500,n=null,h={lat:37.090238,lng:-95.7129,zoom:4},l=5,t=18,w=2,r=null,u=null,x=[],p=null;b.house=function(a){if(!arguments.length)return p;p=pooch.fetch(a).dom();return b};b.chart=function(a){if(!arguments.length)return r;r=a;return b};b.draw=function(a){if(r){var c=x.length;if(c){for(;c--;)x[c].func(x[c].arg);x=[]}r.draw(a)}else b.init();return b};b.zoomControl=function(a){if(!arguments.length)return u;u=a;u.target(b,null,null);return b};b.api=
function(a){if(!arguments.length)return _api;m="GOOGLE"===a.toUpperCase()?!0:!1;j="BING"===a.toUpperCase()?!0:!1;return b};b.map=function(a){if(!arguments.length)return e;e=a;return b};b.symbols=function(a){if(!arguments.length)return s;if(r){var c=a.length;r.symbols(a);for(var e=0;e<c;++e)s[e]=r.symbols()[e],s[e].map(b)}else x.push({func:b.symbols,arg:a});return b};b.reset=function(){e&&b.center({lat:h.lat,lng:h.lng}).zoom(h.zoom);return b};b.zoom=function(a){if(!arguments.length)return l;l=a;e&&
(m&&e.getZoom()!=l?e.setZoom(l):j&&e.setView({zoom:l}));return b};b.zoomMax=function(a){if(!arguments.length)return t;t=a;return b};b.zoomMin=function(a){if(!arguments.length)return w;w=a;return b};b.defaultView=function(a){if(!arguments.length)return h;"undefined"!==typeof a.lat&&(h.lat=a.lat);"undefined"!==typeof a.lng&&(h.lng=a.lng);"undefined"!==typeof a.zoom&&(h.zoom=a.zoom);return b};b.zoomIn=function(){if(e){if(m||j)l=e.getZoom();l+1<=t&&b.zoom(l+1)}return b};b.zoomOut=function(){if(e){if(m||
j)l=e.getZoom();l-1>=w&&b.zoom(l-1)}return b};b.center=function(a){if(!arguments.length)return n;n=a;e&&m&&e.setCenter(new google.maps.LatLng(n.lat,n.lng));return b};b.width=function(a){if(!arguments.length)return p?parseInt(pooch.fetch(p).css("width"),10):k;k=a;return b};b.height=function(a){if(!arguments.length)return p?parseInt(pooch.fetch(p).css("height"),10):f;f=a;return b};b.loadMap=function(){if(m){var a={disableDefaultUI:!0,zoom:h.zoom,center:new google.maps.LatLng(h.lat,h.lng),mapTypeControlOptions:{mapTypeIds:["poochStyle",
google.maps.MapTypeId.ROADMAP]}},c=new google.maps.StyledMapType([{featureType:"all",elementType:"all",stylers:[{lightness:33},{gamma:0.8},{saturation:-61}]},{featureType:"road.local",elementType:"geometry",stylers:[{saturation:-73},{lightness:33},{gamma:0.8},{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{saturation:-91},{gamma:0.8},{visibility:"simplified"},{lightness:100}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},
{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"},{saturation:-91},{gamma:0.8},{lightness:94}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"simplified"},{gamma:0.76}]}]);e=new google.maps.Map(p,a);e.mapTypes.set("poochStyle",c);e.setMapTypeId("poochStyle");new L(b)}else j&&(e=new Microsoft.Maps.Map(p,{credentials:"TODO add the option to initialize with credentials",
center:new Microsoft.Maps.Location(h.lat,h.lng),mapTypeId:Microsoft.Maps.MapTypeId.road,showDashboard:!1,showScalebar:!1,zoom:h.zoom,height:b.height(),width:b.width()}));u&&(p.appendChild(u.domElem()),u.house(p))};b.init=function(){if(m){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=pooch_initMapAPIs");document.body.appendChild(a)}else j&&(a=document.createElement("script"),a.setAttribute("type",
"text/javascript"),a.setAttribute("src","http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0&onScriptLoad=pooch_initMapAPIs"),document.body.appendChild(a));return b};if(!arguments.length)return b;p=pooch.fetch(c).dom();return!p?b:pooch_baseMap=b};var L=function(c){var a=this,b=null,m=c.map(),j=c.chart(),e=null;a.prototype=new google.maps.OverlayView;var s=function(){b=m.getBounds();var e=a.prototype.getProjection(),f=google.maps.Point,n=new google.maps.LatLng(b.getNorthEast().lat(),b.getSouthWest().lng()),
h=e.fromLatLngToDivPixel(n),n=e.fromDivPixelToLatLng(new f(h.x,h.y)),e=e.fromDivPixelToLatLng(new f(h.x+c.width(),h.y+c.height())),f=n.lng(),l=e.lng(),s=f;0<f&&0>l?s=-180+-1*(180-f):0>f&&0>l&&f>l?s=-360+f:0<f&&(0<l&&f>l)&&(s=f-360);j.axisMinX(pooch.helpers.lngToMercator(s)).axisMaxX(pooch.helpers.lngToMercator(l)).axisMaxY(pooch.helpers.latToMercator(n.lat())).axisMinY(pooch.helpers.latToMercator(e.lat()));M?(pooch.fetch(j.house()).css({display:"none"}),c.draw(),setTimeout(function(){pooch.fetch(j.house()).css({top:h.y+
"px",left:h.x+"px",display:"block"});c.zoom(m.getZoom());c.zoomControl().update()},1)):(c.draw(),pooch.fetch(j.house()).css({top:h.y+"px",left:h.x+"px",display:"block"}),c.zoom(m.getZoom()),c.zoomControl().update())};a.bounds=function(c){if(!arguments.length)return b;b=c;return a};a.prototype.onAdd=function(){var b=document.createElement("div");b.style.borderStyle="none";b.style.borderWidth="0px";b.style.position="absolute";e=b;a.prototype.getPanes().overlayMouseTarget.appendChild(b);j=new pooch.chart(b);
c.chart(j);j.height(c.height()).width(c.width());s();google.maps.event.addListener(m,"dragend",function(){s()});google.maps.event.addListener(m,"zoom_changed",function(){c.zoomControl()&&c.zoomControl().slider()&&s()})};a.prototype.draw=function(){};a.prototype.onRemove=function(){e.parentNode.removeChild(e);e=null};a.prototype.setMap(m)};_fetch=function(c){var a=this,b=null,m=function(c){return!arguments.length?a:b.currentStyle?b.currentStyle[c]:document.defaultView&&document.defaultView.getComputedStyle?
document.defaultView.getComputedStyle(b,"")[c]:b.style[c]};a.css=function(c){if("string"===typeof c)return m(c);for(var e in c)if(void 0===_css2js[e]){var s=b.style,k;var f=e;k=f.split("-");var n=k.length;if(1===n)k=k[0];else{for(var f="-"===f.charAt(0)?k[0].charAt(0).toUpperCase()+k[0].substring(1):k[0],h=1;h<n;h++)f+=k[h].charAt(0).toUpperCase()+k[h].substring(1);k=f}s[k]=c[e]}else b.style[_css2js[e]]=c[e];return a};a.dom=function(){return b};a.mouseOver=function(c){"function"===typeof c&&b.addEventListener("mouseover",
function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseMove=function(c){"function"===typeof c&&b.addEventListener("mousemove",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseDown=function(c){"function"===typeof c&&b.addEventListener("mousedown",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseOut=function(c){"function"===typeof c&&b.addEventListener("mouseout",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseUp=function(c){"function"===typeof c&&b.addEventListener("mouseup",function(a){_mouseEvent(b,
a,c)},!1);return a};a.removeEvent=function(){return a};if(!arguments.length||void 0===c)return a;if("string"===typeof c)"#"===c.substr(0,1)?b=document.getElementById(c.substr(1,c.length)):"."===c.substr(0,1)?b=document.getElementsByClassName(c.substr(1,c.length))[0]:null!==document.getElementById(c)&&void 0!==document.getElementById(c)&&document.getElementById(c);else if(c.tagName||c.nodeName)b=c;return a};pooch.helpers={keyFromObj:function(c){for(var a in c)if(c.hasOwnProperty(a))return a;return null},
formatNumber:function(c){c=c.toString();parts=c.toString().split(".");parts[0]=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");return parts.join(".")},distanceToPoint:function(c,a,b,m){return Math.sqrt((c-=b)*c+(a-=m)*a)},latToMercator:function(c){c=Math.sin(c*(Math.PI/180));return 3189068.5*Math.log((1+c)/(1-c))},lngToMercator:function(c){return 111319.49079327169*c},indexOf:function(c,a){for(var b=c.length;b--;)if(c[b]===a)return b},parseWebkitMatrix:function(c){c=c.match(/\([0-9epx\.\, \t\-]+/gi)[0].substr(1).split(",");
return{m11:c[0],m12:c[1],m21:c[2],m22:c[3],tX:c[4],tY:c[5]}},degreesToRadians:function(c){return c*Math.PI/180},pieChart:function(c){return new function(a){var b=this,c=a,j=function(a){var b=a.symbolGroup.data().datum(),k=a.symbolGroup.context(),f=a.symbolGroup.order();a:{for(var j=f.length,h=0;j--;)if(f[j]!==a.poochID)h+=b[f[j]][c];else{f=h;break a}f=void 0}f=360*(pooch.helpers.degreesToRadians(f)/100);a=360*(pooch.helpers.degreesToRadians(b[a.poochID][c])/100);return{sAngle:f,eAngle:f+a,ctx:k}};
b.field=function(a){if(!arguments.length)return c;c=a;return b};b.process=function(a,b){var c=j(a);c.ctx.beginPath();c.ctx.moveTo(b.x,b.y);c.ctx.arc(b.x,b.y,b.size,c.sAngle,c.eAngle,!1);c.ctx.closePath()};b.hitTest=function(a,b,c){var f=j(a);b=a.x-b;c=a.y-c;return Math.sqrt(Math.pow(b,2)+Math.pow(c,2))<a.size&&(a=Math.atan2(c,b)+Math.PI,a>=f.sAngle&&a<=f.eAngle)?!0:!1};return b}(c)}};window.pooch_initMapAPIs=function(){pooch_baseMap.loadMap()};window.pooch_baseMap=null;var M="object"===typeof navigator.vendor&&
-1!==navigator.vendor.indexOf("Apple")?!0:!1;_chartNdx=0;_css2js={"float":"styleFloat","text-decoration: blink":"textDecorationBlink","text-decoration: line-through":"textDecorationLineThrough","text-decoration: none":"textDecorationNone","text-decoration: overline":"textDecorationOverline","text-decoration: underline":"textDecorationUnderline"};_mouseEvent=function(c,a,b){if(c.getBoundingClientRect){c=c.getBoundingClientRect();var m=c.top;a.localX=a.clientX-c.left;a.localY=a.clientY-m}b(a)}})();