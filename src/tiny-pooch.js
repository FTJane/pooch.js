(function(){pooch={version:"0.0.3",author:"Jeremy White",chart:function(c){return new K(c)},data:function(c){return new _data(c)},fetch:function(c){return _fetch(c)},log:function(c){window.console&&window.console.log&&console.log(c)},map:function(c,a){return new pooch_map(c,a)},popup:function(c){return new _popup(c)},symbolGroup:function(c){return new _symbolGroup(c)},zoomControl:function(c){return new _zoomControl(c)}};pooch.supportsCanvas=!!document.createElement("canvas").getContext;var K=function(c){var a=
this,b=0,k=0,m=null,e="chart"+_chartNdx,s=1,h=1,j=0,n=100,f=0,l=100,u=0,y=100,p=0,v=100,w=1,r=1;_zoom=0;_zoomLevels=[1,2,4,8,16];_center={x:50,y:50};_offsetY=_offsetX=0;_cvsHidden=_ctxHidden=_ctxHltMain=_ctxMain=_ctxHltBack=_ctxBack=null;_isAnimating=!1;_isInteract=!0;_isDragging=_isMouseDown=!1;_projection=_zoomControl=null;_mouseIgnore=!1;_circle=2*Math.PI;_funcQueue=[];_symGrp=[];_symCur=_symGrpCur=null;_symAction="over";_timeOut=null;_layersPre=[{_container:"div"}];_layersMain=[{_highlightMain:"canvas"},
{_main:"canvas"},{_highlightBack:"canvas"},{_back:"canvas"}];_layersPost=[{_mouse:"div"},{_popup:"div"}];var t=function(a){var b=pooch.helpers.keyFromObj(a),d=0===a[b]?0:"px";cssObj={};ndxPre=_layersPre.length;ndxMain=_layersMain.length;ndxPost=_layersPost.length;for(cssObj[b]=a[b]+d;ndxPre--;)d=pooch.helpers.keyFromObj(_layersPre[ndxPre]),d=pooch.fetch("#pooch"+d+"_"+e),d.css(cssObj).dom()[b]=a[b],"width"==b&&d.css({left:-(a.width/3)+"px"}),"height"==b&&d.css({top:-(a.height/3)+"px"});if(pooch.supportsCanvas)for(;ndxMain--;)d=
pooch.helpers.keyFromObj(_layersMain[ndxMain]),pooch.fetch("#pooch"+d+"_"+e).css(cssObj).dom()[b]=a[b];for(;ndxPost--;)d=pooch.helpers.keyFromObj(_layersPost[ndxPost]),pooch.fetch("#pooch"+d+"_"+e).css(cssObj).dom()[b]=a[b]},D=function(a){var b=pooch.fetch("#pooch_popup_"+e).dom();a(b)},I=function(a,d,F){var g=0,c=0,g=a.popup().offsetX(),c=a.popup().offsetY(),e=a.popup().width(),m=a.popup().height(),h=k/3,c=F-m-c-10<b/3?c:-m-c,g=d+g-e/2-10<h?h+-d+10:d+g+e/2+10>2*h?2*h-(d+e)-10:g+e/-2;a.popup().x(d+
g).y(F+c)},z=function(a,d){if(!d){var F=a.localX,g=a.localY,c=!1,e=!1,j=[],f=[],l=0,x=_symGrp.length,t=k,n=null,u=null;if(!_isMouseDown){for(var q=0;q<x;++q)if(_symGrp[q].interactive()){var p=_symGrp[q].state(),r;for(r in p){var E=0,y=0;switch(p[r].shape){case "circle":E=p[r].size;y=p[r].size;break;case "rect":case "hex":E=p[r].width/2;y=p[r].height/2;break;case "poly":a:{for(var c=p[r].shapePoints,v=[F,g],w=c.length;w--;){for(var B=c[w],D=!1,z=-1,G=B.length,C=G-1;++z<G;C=z)(B[z][1]<=v[1]&&v[1]<B[C][1]||
B[C][1]<=v[1]&&v[1]<B[z][1])&&v[0]<(B[C][0]-B[z][0])*(v[1]-B[z][1])/(B[C][1]-B[z][1])+B[z][0]&&(D=!D);if(D){c=!0;break a}}c=!1}break;case "custom":c=_symGrp[q].customShape().hitTest(p[r],F,g)}if("over"===_symAction){if(v=(w=_symGrp[q].map())?p[r].lng:p[r].x,w=w?p[r].lat:p[r].y,c||F<v+E&&F>v-E&&g<w+y&&g>w-y)j[l]=_symGrp[q],f[l]=p[r],e=!0,l++}else"closest"===_symAction&&(j[l]=_symGrp[q],f[l]=p[r],e=!0,l++)}}l=f.length;if(e){for(;l--;)f[l].drawFill&&(e=pooch.helpers.distanceToPoint(f[l].x,f[l].y,F,g),
e<=t&&(n=j[l],u=f[l],t=e));f=n;symCur=u;if(_symCur!==symCur&&symCur){_symGrpCur&&(_symGrpCur.popup().hide(),"MAIN"===_symGrpCur.layer().toUpperCase()?A(_ctxHltMain,k,b):A(_ctxHltBack,k,b));u={};j="MAIN"===f.layer().toUpperCase()?"highlightMain":"highlightBack";_symGrpCur=f;_symCur=symCur;u[_symCur.poochID]=_symCur;s=h=1;f=_symGrpCur;t=_symGrpCur.state();n=_symCur.poochID;if(!_symCur||t[n]!==_symCur[n])f.popup().layout(n),I(f,F,g);pooch.fetch(m).css({cursor:"pointer"});H(null,j,{obj:_symGrpCur,key:u})}else _symCur===
symCur&&symCur&&I(f,F,g)}else _symCur&&(_symGrpCur.popup().hide(),pooch.fetch(m).css({cursor:"default"}),"MAIN"===_symGrpCur.layer().toUpperCase()?A(_ctxHltMain,k,b):A(_ctxHltBack,k,b)),_symCur=_symGrpCur=null}}},E=function(a,b,d,g,c){var e={},k=a.state();if(1===g){var m=a.data().datum(),f=a.symAttrs();b[d].list=[];for(var h in f)b[d][h]="function"===typeof f[h]?f[h](b[d],m[d]):null!==f[h]?f[h]:b[d][h],b[d][h]!==k[d][h]&&b[d].list.push(h)}for(m=b[d].list.length;m--;)f=b[d].list[m],h=a.stepFunc(f),
e[f]=h(g,k[d][f],b[d][f],c,b[d].easing);return e},B=function(a,b,d,g,c){if(pooch.supportsCanvas){var e=c?d.fillColorHighlight:d.fillColor,f=c?d.fillOpacityHighlight:d.fillOpacity,k=c?d.drawStrokeHighlight:d.drawStroke,m=c?d.strokeWidthHighlight:d.strokeWidth,h=c?d.strokeColorHighlight:d.strokeColor,j=c?d.strokeOpacityHighlight:d.strokeOpacity;if(c?d.drawFillHighlight:d.drawFill)g.fillStyle="rgba("+e+","+f+")";k&&(g.lineWidth=m,g.strokeStyle="rgba("+h+","+j+")");c=(e=a.map())?d.lng:d.x;e=e?d.lat:d.y;
switch(d.shape){case "circle":g.arc(c+_offsetX,e+_offsetY,d.size,0,_circle,!1);break;case "rect":g.rect(c-d.width/2+_offsetX,e-d.height/2+_offsetY,d.width,d.height);break;case "bezcurve":break;case "line":g.moveTo(c+_offsetX,e+_offsetX);d=a.datum(b).order;a=0<d?a.state(a.order()[d-1]):a.datum(b);g.lineTo(a.x+_offsetX,a.y+_offsetY);break;case "hex":a=d.width/2;b=d.height/2;d=a/2;g.moveTo(c-d+_offsetX,e-b+_offsetY);g.lineTo(c+d+_offsetX,e-b+_offsetY);g.lineTo(c+a+_offsetX,e+_offsetY);g.lineTo(c+d+_offsetX,
e+b+_offsetY);g.lineTo(c-d+_offsetX,e+b+_offsetY);g.lineTo(c-a+_offsetX,e+_offsetY);g.lineTo(c-d+_offsetX,e-b+_offsetY);break;case "poly":a=d.shapePoints;for(b=a.length;b--;){d=a[b].length-1;for(g.moveTo(a[b][d][0],a[b][d][1]);d--;)g.lineTo(a[b][d][0],a[b][d][1])}break;case "custom":g=a.datum(b);a.data().datum(b);a.customShape().process(g,d,{x:_offsetX,y:_offsetY});break;default:g.arc(c+_offsetX,e+_offsetY,d.size,0,_circle,!1)}}},G=function(a,d){var c="";if(a)c=a.toUpperCase(),A(d?"HIGHLIGHTMAIN"===
c?_ctxHltMain:_ctxHltBack:"MAIN"===c?_ctxMain:_ctxBack,k,b);else for(var g=_symGrp.length,e=!1,f=!1,m=!1;g--;)switch(c=_symGrp[g].layer().toUpperCase(),c){case "BACK":f||(f=!0,A(_ctxBack,k,b),A(_ctxHltBack,k,b));break;case "MAIN":e||(e=!0,A(_ctxMain,k,b),A(_ctxHltMain,k,b));break;default:m||(m=!0,A(_ctxHltMain,k,b),A(_ctxHltBack,k,b))}},H=function(a,d,b){clearTimeout(_timeOut);var c=(a=b?!0:!1)?1:_symGrp.length;_isAnimating=!0;if(m){pooch.supportsCanvas&&G(d,b);for(var e=0;e<c;++e)if(void 0!==d&&
t!==d.toUpperCase()?a:1){var f=a?b.key:_symGrp[e].datum(),k=a?b.obj:_symGrp[e],j=a?[pooch.helpers.keyFromObj(b.key)]:k.order(),l=a?1:j.length,t=k.layer().toUpperCase(),x=a?"MAIN"===t?_ctxHltMain:_ctxHltBack:"MAIN"===t?_ctxMain:_ctxBack,n=k.batch()?!0:!1;k.context(x);if(n&&!a){var j=k.batchObj(),u;for(u in j){l=j[u].length;for(x.beginPath();l--;){var n=j[u][l],p=E(k,f,n,s,h),q;for(q in k.symAttrs())p[q]=p[q]||f[n][q];B(k,n,p,x,a)}x.fill();x.stroke()}}else for(n=0;n<l;++n){x.beginPath();var p=E(k,f,
j[n],s,h),r;for(r in k.symAttrs())p[r]=p[r]||f[j[n]][r];B(k,j[n],p,x,a);var v=a?p.drawStrokeHighlight:p.drawStroke;(a?p.drawFillHighlight:p.drawFill)&&x.fill();v&&x.stroke()}}s++;if(s<=h&&1<h)_timeOut=setTimeout(H,1);else{s=1;for(d=_symGrp.length;d--;)a||_symGrp[d].state(!0);_zoomControl&&_zoomControl.update();_isAnimating=!1}}},A=function(a,d,b){a&&a.clearRect(0,0,d,b)},C=function(){w=(n-j)/k;r=(l-f)/b},q=function(){_center.x=j+(n-j)/2;_center.y=f+(l-f)/2},J=function(){return 0},d=function(){return _zoomLevels.length-
1},x=function(d){if(!arguments.length)return a;if(d.val instanceof Array){for(var c=_projection?!0:!1,e=[],g=d.val.length,m=j-(n-j),h=n+(n-j),x=f-(l-f),t=l+(l-f);g--;){var p=d.val[g].length;e[g]=[];for(var s=!0;p--;){e[g][p]=[];var u=d.val[g][p][0],q=d.val[g][p][1],s=c?_projection(u,q,s):{x:u,y:q},u=b-b*((s.y-x)/(t-x));e[g][p][0]=k*((s.x-m)/(h-m));e[g][p][1]=u;s=!1}}return e}e=(c="width"===d.dim)?k:b;m=n-j;h=l-f;g=c?j-m:f-h;m=c?n+m:l+h;return c?e*((d.val-g)/(m-g)):e-e*((d.val-g)/(m-g))};a.bounds=
function(d){if(!arguments.length)return _bounds;if(d.length)a.axisMinX(d[3]),a.axisMaxX(d[1]),a.axisMinY(d[2]),a.axisMaxY(d[0]),u=d[3],p=d[2],v=d[0],y=void 0;else{var c=d.data().datum(),e=Number.MAX_VALUE,g=Number.MIN_VALUE,m=e,f=g,h;for(h in c)for(var j=c[h][d.shapeData()],l=j?j.length:0;l--;)for(var x=j[l].length;x--;){var t=j[l][x][0],n=j[l][x][1];t<m&&(m=t);t>f&&(f=t);n>g&&(g=n);n<e&&(e=n)}c=b/k;h=Math.abs(g-e)/Math.abs(f-m);c<h?(c=(f-m)*(h-c)/2,m-=c,f+=c):h<c&&(c=(g-e)*(c-h)/2,e-=c,g+=c);a.axisMinX(m);
a.axisMaxX(f);a.axisMinY(e);a.axisMaxY(g);u=m;y=f;p=e;v=g}C();q();return a};a.symbolGroup=function(d){if(!arguments.length)return _symGrp;for(var b=d.length,c=!1,e=0;e<b;++e)_symGrp[e]=d[e],_symGrp[e].chart(a,x),_symGrp[e].state(!0),m?(_symGrp[e].popup()&&D(_symGrp[e].popup().house),!c&&_symGrp[e].interactive()&&(a.mouseMove(z),a.mouseOut(z),c=!0)):(_funcQueue.push({func:D,arg:_symGrp[e].popup().house}),_funcQueue.push({func:a.mouseMove,arg:z}),_funcQueue.push({func:a.mouseOut,arg:z}));return a};
a.width=function(d){if(!arguments.length)return k/3;k=3*d;m?(t({width:k}),_cvsHidden.width=k,_cvsHidden.style.width=k+"px"):_funcQueue.push({func:t,arg:{width:k}});return a};a.height=function(d){if(!arguments.length)return b/3;b=3*d;m?(t({height:b}),_cvsHidden.height=b,_cvsHidden.style.height=b+"px"):_funcQueue.push({func:t,arg:{height:b}});return a};a.axisMinX=function(d){if(!arguments.length)return j;j=d;return a};a.axisMaxX=function(d){if(!arguments.length)return n;n=d;return a};a.axisMinY=function(d){if(!arguments.length)return f;
f=d;return a};a.axisMaxY=function(d){if(!arguments.length)return l;l=d;return a};a.projection=function(d){if(!arguments.length)return _projection;null===d&&(_projection=null);"function"===typeof d&&(_projection=d);return a};a.reset=function(){j=u;n=y;f=p;l=v;q();a.zoom(0);return a};a.zoomControl=function(c){if(!arguments.length)return _zoomControl;_zoomControl=c;_zoomControl.target(a,J,d);m.appendChild(_zoomControl.domElem());_zoomControl.house(m);var h=pooch.fetch("#pooch_container_"+e).dom(),x=
!1,g={elem:null,init:function(){h.onmousedown=g.start;window.navigator.msPointerEnabled?(h.addEventListener("MSPointerDown",g.start,!1),"undefined"!==typeof h.style.msTouchAction&&(h.style.msTouchAction="none")):h.attachEvent&&h.setCapture?(x=!0,h.attachEvent("onmousedown",function(){g.start(window.event);return window.event.returnValue=!1})):h.addEventListener&&(h.addEventListener("touchstart",g.start,!1),h.addEventListener("mousedown",g.start,!1))},start:function(a){_isDragging=!0;if(_symGrpCur){var d=
"MAIN"===_symGrpCur.layer().toUpperCase()?"highlightMain":"highlightBack";_symGrpCur.popup().hide();G(d,!0);_symGrpCur=_symCur=null}g.elem=this;var d=parseInt(g.elem.style.left,10),b=parseInt(g.elem.style.top,10);isNaN(d)&&(g.elem.style.left="0px");isNaN(b)&&(g.elem.style.top="0px");"function"===typeof window.webkitURL&&(g.elem.style.webkitTransform="matrix(1, 0, 0, 1, 0, 0)");a=a?a:window.event;g.elem.mouseX=a.clientX;g.elem.mouseY=a.clientY;window.navigator.msPointerEnabled?(document.addEventListener("MSPointerDown",
g.start,!1),"undefined"!==typeof h.style.msTouchAction&&(h.style.msTouchAction="none")):h.attachEvent&&h.setCapture?(x=!0,document.attachEvent("onmousemove",function(){g.active(window.event);return window.event.returnValue=!1}),document.attachEvent("onmouseup",function(){g.end(window.event);return window.event.returnValue=!1})):h.addEventListener&&(document.addEventListener("touchmove",g.active,!1),document.addEventListener("touchend",g.end,!1),document.addEventListener("touchcancel",g.end,!1),document.addEventListener("touchleave",
g.end,!1),document.addEventListener("mousemove",g.active,!1),document.addEventListener("mouseup",g.end,!1),h.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&(x=!0));return!1},active:function(a){a.preventDefault();if(g.elem){_isDragging=!0;a=a.changedTouches?a.changedTouches:[a];if("function"===typeof window.webkitURL){var d=pooch.helpers.parseWebkitMatrix(g.elem.style.webkitTransform),b=parseInt(d.tX,10)+(a[0].clientX-g.elem.mouseX),d=parseInt(d.tY,10)+(a[0].clientY-g.elem.mouseY);g.elem.style.webkitTransform=
"matrix(1, 0, 0, 1, "+b+", "+d+")"}else b=parseInt(g.elem.style.left,10)+(a[0].clientX-g.elem.mouseX),d=parseInt(g.elem.style.top,10)+(a[0].clientY-g.elem.mouseY),g.elem.style.left=b+"px",g.elem.style.top=d+"px";g.elem.mouseX=a[0].clientX;g.elem.mouseY=a[0].clientY}return!1},end:function(){if(null!==g.elem){_isDragging=!1;var a,d,c=-(k/3),h=-(b/3);"function"===typeof window.webkitURL?(d=pooch.helpers.parseWebkitMatrix(g.elem.style.webkitTransform),a=c+parseInt(d.tX,10),d=h+parseInt(d.tY,10)):(a=parseInt(g.elem.style.left,
10),d=parseInt(g.elem.style.top,10));var m=(a-c)*3*w,t=(d-h)*3*r;j-=m;n-=m;f+=t;l+=t;q();0!==a&&0!==d&&(H(),"function"===typeof window.webkitURL?g.elem.style.webkitTransform="matrix(1, 0, 0, 1, 0, 0)":pooch.fetch("#pooch_container_"+e).css({top:h+"px",left:c+"px"}));x?document.releaseCapture():(document.removeEventListener("mousemove",g.active,!1),document.removeEventListener("mouseup",g.end,!1),document.removeEventListener("touchmove",g.active,!1),document.removeEventListener("touchend",g.end,!1),
document.removeEventListener("touchcancel",g.end,!1),document.removeEventListener("touchleave",g.end,!1));g.elem=null}}};g.init();_zoomControl.update();return a};a.zoomIn=function(){m&&_zoom+1<_zoomLevels.length&&a.zoom(_zoom+1);return a};a.zoomOut=function(){m&&(0===_zoom-1?a.reset():0<=_zoom-1&&a.zoom(_zoom-1));return a};a.zoom=function(d){if(!arguments.length)return _zoom;_zoom=d;j=_center.x-(y-u)/2/_zoomLevels[_zoom];n=_center.x+(y-u)/2/_zoomLevels[_zoom];f=_center.y-(v-p)/2/_zoomLevels[_zoom];
l=_center.y+(v-p)/2/_zoomLevels[_zoom];q();C();H();return a};a.zoomLevels=function(d){if(!arguments.length)return _zoomLevels;_zoomLevels=d;return a};a.draw=function(d,b){s=1;h=arguments.length?d:1;m?H(d,b):_funcQueue.push({func:_drawSym,arg:null});return a};a.mouseIgnore=function(d){if(!arguments.length)return _mouseIgnore;_mouseIgnore=d;return a};a.mouseMove=function(d){if("function"===typeof d){var b=function(a){d(a,_isAnimating||_isDragging||_mouseIgnore)};m?pooch.fetch("#pooch_mouse_"+e).mouseMove(b):
_funcQueue.push({func:d,arg:b})}return a};a.mouseOver=function(d){"function"===typeof d&&(m?pooch.fetch("#pooch_mouse_"+e).mouseOver(d):_funcQueue.push({func:a.mouseOver,arg:d}));return a};a.mouseDown=function(d){"function"===typeof d&&(m?pooch.fetch("#pooch_mouse_"+e).mouseDown(d):_funcQueue.push({func:a.mouseDown,arg:d}));return a};a.mouseOut=function(d){"function"===typeof d&&(m?pooch.fetch("#pooch_mouse_"+e).mouseOut(function(){z({localX:-2E4,localY:-2E4})}):_funcQueue.push({func:a.mouseOut,arg:d}));
return a};a.activeSymbol=function(d){if(!arguments.length)return _symCur;_symCur=d;return a};a.house=function(d){if(!arguments.length)return m;var c=pooch.fetch(d).dom();if(c){m=c;for(var c=[],h="",g=_layersPre.length,f=_layersMain.length,j=_layersPost.length;g--;){var l=pooch.helpers.keyFromObj(_layersPre[g]),h=_layersPre[g][l];c.push("<"+_layersPre[g][l]+" id='pooch"+l+"_"+e+"' width='"+k+"' height='"+b+"' style='position:relative;top:0;left:0;width:"+k+"px;height:"+b+"px;'>")}if(pooch.supportsCanvas){for(;f--;)g=
pooch.helpers.keyFromObj(_layersMain[f]),c.push("<"+_layersMain[f][g]+" id='pooch"+g+"_"+e+"' width='"+k+"' height='"+b+"' style='position:absolute;top:0;left:0;width:"+k+"px;height:"+b+"px;'></"+_layersMain[f][g]+">");_cvsHidden=document.createElement("canvas");_cvsHidden.id="poochCvsHidden_"+e;_cvsHidden.width=k;_cvsHidden.height=b;_cvsHidden.style.width=k+"px";_cvsHidden.style.height=b+"px";_ctxHidden=_cvsHidden.getContext("2d")}for(;j--;)f=pooch.helpers.keyFromObj(_layersPost[j]),c.push("<"+_layersPost[j][f]+
" id='pooch"+f+"_"+e+"' width='"+k+"' height='"+b+"' style='position:absolute;top:0;left:0;width:"+k+"px;height:"+b+"px;'></"+_layersPost[j][f]+">");c.push("</"+h+">");c=c.join("");m.innerHTML=c;_ctxBack=pooch.fetch("#pooch_back_"+e).dom().getContext("2d");_ctxMain=pooch.fetch("#pooch_main_"+e).dom().getContext("2d");_ctxHltMain=pooch.fetch("#pooch_highlightMain_"+e).dom().getContext("2d");_ctxHltBack=pooch.fetch("#pooch_highlightBack_"+e).dom().getContext("2d");e="chart"+_chartNdx++;for(c=_funcQueue.length;c--;)_funcQueue[c].func(_funcQueue[c].arg);
_funcQueue=[]}return a};if(!arguments.length||void 0===c)return a;a.house(c);return a};_symbolGroup=function(c){var a=this,b=function(a,b,c,e,h){var g=c-b;if(!e||1===e||a===e)return c;switch(h){case "linear":return b+g*(a/e);case "easeIn":return g*(a/=e)*a*a+b;case "easeOut":return g*((a=a/e-1)*a*a+1)+b;case "easeInOut":return 1>(a/=e/2)?g/2*a*a*a+b:g/2*((a-=2)*a*a+2)+b;default:return b+g*(a/e)}},k=function(a,b,c){return c},m=function(a,c,e,h,f){if(!h||1===h||a===h)return e;c=c.split(",");var g=e.split(",");
e=b(a,c[0]|0,g[0]|0,h,f)>>0;var m=b(a,c[1]|0,g[1]|0,h,f)>>0;a=b(a,c[2]|0,g[2]|0,h,f)>>0;return e+","+m+","+a},e=function(a){var b=a+"_pooch_proj_y",c;for(c in l.datum())l.datum()[c][b]=pooch.helpers.latToMercator(l.datum()[c][a]);q.lat=function(a,d){return r({dim:"height",val:d[b]})}},s=function(a){var b=a+"_pooch_proj_x",c;for(c in l.datum())l.datum()[c][b]=pooch.helpers.lngToMercator(l.datum()[c][a]);q.lng=function(a,d){return r({dim:"width",val:d[b]})}},h=function(d){if(!arguments.length)return a;
var b=d.length;for(f={};b--;){var c=d[b];f[c]={};for(var e in q)f[c][e]=q[e];f[c].poochID=c;p[b]=c;f[c].order=b}return a},j=function(d,b){if(1===arguments.length)return q[d];n(b)?d=function(a,d){return d[b]}:q[d]=b;return a},n=function(d){var b=null,c;for(c in a.state()){b=c;break}return"string"===typeof d&&"undefined"!==typeof l.datum(b)[d]};a.sort=function(){l&&"function"===typeof q.size&&p.sort(function(a,b){var c=q.size(f[a],l.datum(f[a].poochID));sizeB=q.size(f[b],l.datum(f[b].poochID));return sizeB-
c});return a};a.data=function(d){if(!arguments.length)return l;l=d;h(l.keys());for(var b=A.length;b--;)A[b].func(A[b].arg);A=[];return a};a.batch=function(d){if(!arguments.length)return t;t=d;return a};a.chart=function(d,b){if(!arguments.length)return w;w=d;r=b;return a};a.symAttrs=function(d){if(!arguments.length)return q;for(var b in d)_attr[b]=d[b];return a};a.datum=function(a){return!arguments.length?f:f[a]};a.stepFunc=function(a){return!arguments.length?J:J[a]};a.popup=function(d){if(!arguments.length)return u;
u=d;u.data(a,l);E=!0;return a};a.drawFill=function(a){return j("drawFill",a)};a.drawStroke=function(a){return j("drawStroke",a)};a.drawFillHighlight=function(a){return j("drawFillHighlight",a)};a.fillColorHighlight=function(a){return j("fillColorHighlight",a)};a.fillOpacityHighlight=function(a){return j("fillOpacityHighlight",a)};a.drawStrokeHighlight=function(a){return j("drawStrokeHighlight",a)};a.strokeWidthHighlight=function(a){return j("strokeWidthHighlight",a)};a.strokeColorHighlight=function(a){return j("strokeColorHighlight",
a)};a.strokeOpacityHighlight=function(a){return j("strokeOpacityHighlight",a)};a.size=function(a){return j("size",a)};a.fillOpacity=function(a){return j("fillOpacity",a)};a.strokeOpacity=function(a){return j("strokeOpacity",a)};a.strokeColor=function(a){return j("strokeColor",a)};a.strokeWidth=function(a){return j("strokeWidth",a)};a.shapeData=function(b){if(!arguments.length)return H;"string"===typeof b&&(H=b);return a};a.shape=function(b){if(!arguments.length)return q.shape;q.shape=b;return a};
a.order=function(b){if(!arguments.length)return p;p=b;return a};a.layer=function(b){if(!arguments.length)return v;v=b;return a};a.easing=function(b){if(!arguments.length)return q.easing;q.easing=b;return a};a.fillColor=function(b){if(!arguments.length)return q.fillColor;q.fillColor=b;D=!0;return a};a.width=function(b){if(!arguments.length)return q.width;"string"===typeof b?(G=b,q.width=function(a,c){return c[b]}):q.width=b;return a};a.height=function(b){if(!arguments.length)return q.height;q.height=
"string"===typeof b?function(a,c){return c[b]}:b;return a};a.interactive=function(b){if(!arguments.length)return E;E=b;return a};a.map=function(b){if(!arguments.length)return B;B=b;return a};a.context=function(b){if(!arguments.length)return y;y=b;return a};a.customShape=function(b){if(!arguments.length)return I;I=b;return a};a.batchObj=function(b){if(!arguments.length){if(D){z={};for(var c in f){var e="string"===typeof a.fillColor()?a.fillColor():a.fillColor()(f[c],l.datum()[c]);z.hasOwnProperty(e)?
z[e].push(f[c].poochID):z[e]=[f[c].poochID]}D=!1}return z}z=b;return a};a.x=function(b){if(!arguments.length)return q.x;n(b)?(G=b,q.x=function(a,b){return r({dim:"width",val:b[G]})}):q.x=function(){return r({dim:"width",val:b})};return a};a.y=function(b){if(!arguments.length)return q.y;q.y=n(b)?function(a,c){return r({dim:"height",val:c[b]})}:function(){return r({dim:"height",val:b})};return a};a.lat=function(b){if(!arguments.length)return q.lat;"string"===typeof b?l?e(b):A.push({func:e,arg:b}):q.lat=
pooch.helpers.latToMercator(b);return a};a.lng=function(b){if(!arguments.length)return q.lng;"string"===typeof b?l?s(b):A.push({func:s,arg:b}):q.lng=pooch.helpers.lngToMercator(b);return a};a.shapePoints=function(b){if(!arguments.length)return q.shapePoints;"string"===typeof b?(a.shapeData(b),l?q.shapePoints=function(a,c){return r({sym:a,val:c[b]})}:A.push({func:a.shapePoints,arg:b})):q.shapePoints=b;return a};a.state=function(a){if(arguments.length){if(1===arguments.length&&"undefined"!==typeof C[a])return C[a]}else return C;
for(var b in f){C[b]={};for(var c in q)C[b][c]=f[b][c];C[b].poochID=b}return C};var f={},l=null,u=null,y=null,p=[],v="main",w=null,r=null,t=!1,D=!1,I=null,z={},E=!1,B=null,G=null,H="",A=[],C={},q={symbolGroup:a,x:0,y:0,lat:0,lng:0,visible:!0,shape:"circle",easing:"easeInOut",drawFill:!0,drawStroke:!0,size:6,height:6,width:6,fillColor:"200,200,200",fillOpacity:1,strokeColor:"255,255,255",strokeOpacity:1,strokeWidth:1,shapePoints:[],drawFillHighlight:!0,fillColorHighlight:"200,200,200",fillOpacityHighlight:1,
drawStrokeHighlight:!0,strokeWidthHighlight:1,strokeColorHighlight:"0,0,0",strokeOpacityHighlight:1},J={symbolGroup:k,poochID:k,order:k,x:b,y:b,lat:b,lng:b,visible:k,shape:k,easing:k,drawFill:k,drawStroke:k,size:b,height:b,width:b,fillColor:m,fillOpacity:b,strokeColor:m,strokeOpacity:b,strokeWidth:b,shapePoints:function(a,b,c){return c},drawFillHighlight:k,fillColorHighlight:k,fillOpacityHighlight:k,drawStrokeHighlight:k,strokeWidthHighlight:k,strokeColorHighlight:k,strokeOpacityHighlight:k};if(!arguments.length)return a;
a.shape(c);return a};_zoomControl=function(c){var a=this,b=null,k=null,m=null,e=null,s=null,h=null,j=null,n=null,f=null,l=null,u=null,y=0,p=0,v=[],w=function(a,b){if(e){var c=pooch.fetch(b).dom();if(c)return c}else v.push({func:a,arg:b});return null},r=function(){m.reset()},t=function(){m.zoomIn()},D=function(){m.zoomOut()},I=function(){},z=function(){};a.house=function(b){if(!arguments.length)return e;var c=pooch.fetch(b).dom();c&&(e=c,e.appendChild(k));for(c=v.length;c--;)v[c].func(v[c].arg);v=
[];s&&pooch.fetch(s).mouseDown(r);h&&pooch.fetch(h).mouseDown(t);j&&pooch.fetch(j).mouseDown(D);n&&pooch.fetch(n).mouseDown(I);f&&pooch.fetch(f).mouseDown(z);return a};a.domElem=function(b){if(!arguments.length)return k;k=b;return a};a.target=function(b,c,e){if(!arguments.length)return m;m=b;null!==c&&(l=c);null!==e&&(u=e);return a};a.reset=function(b){if(!arguments.length)return s;s=w(a.reset,b);return a};a.zoomIn=function(b){if(!arguments.length)return h;h=w(a.zoomIn,b);return a};a.zoomOut=function(b){if(!arguments.length)return j;
j=w(a.zoomOut,b);return a};a.handle=function(b){if(!arguments.length)return n;n=w(a.handle,b);return a};a.slider=function(b){if(!arguments.length)return f;f=w(a.slider,b);return a};a.top=function(b){if(!arguments.length)return y;y=b;pooch.fetch(k).css({top:y+"px"});return a};a.left=function(b){if(!arguments.length)return p;p=b;pooch.fetch(k).css({left:p+"px"});return a};a.update=function(){var b=null!==l?l():m.zoomMin(),c=null!==u?u():m.zoomMax(),b=parseInt(pooch.fetch(f).css("height"),10)/(c-b),
c=(c-m.zoom())*b>>0;pooch.fetch(n).css({top:c+"px"});return a};if(!arguments.length)return a;"string"===typeof c&&(null!==document.getElementById(c)&&void 0!==document.getElementById(c))&&(b=document.getElementById(c),k=document.createElement("div"),k.style.borderStyle="none",k.style.borderWidth="0px",k.style.position="absolute",k.style.display="block",k.innerHTML=b.innerHTML,a.domElem(k));return a};_popup=function(c){var a=this,b=null,k=null,m=null,e=null,s=0,h=0,j=0,n=24,f=0,l=0;a.house=function(c){if(!arguments.length)return m;
var e=pooch.fetch(c).dom();e&&(m=e,m.appendChild(b));return a};a.width=function(b){if(!arguments.length)return f;f=b;return a};a.height=function(c){if(!arguments.length)return l;l=c;pooch.fetch(b).css({height:l+"px"});return a};a.offsetX=function(b){if(!arguments.length)return j;j=b;return a};a.offsetY=function(b){if(!arguments.length)return n;n=b;return a};a.x=function(c){if(!arguments.length)return s;s=c;pooch.fetch(b).css({left:s+"px"});return a};a.y=function(c){if(!arguments.length)return h;h=
c;pooch.fetch(b).css({top:h+"px"});return a};a.hide=function(){pooch.fetch(b).css({top:"-3000px",left:"-3000px"});return a};a.layout=function(c){if(!arguments.length)return b.innerHTML;for(var h=k.innerHTML,f=[{text:RegExp(/exec(\s*)\{(.*?)\}/g),chunk:RegExp(/\{(.*?)\}/),js:!0,obj:!1},{text:RegExp(/data\.(.*?)[^a-zA-Z0-9_]/g),chunk:RegExp(/\.(.*?)[^a-zA-Z0-9_]/),js:!1,obj:!0},{text:RegExp(/data(\s*)\[(.*?)\]/g),chunk:RegExp(/\[(.*?)\]/),js:!0,obj:!0},{text:RegExp(/sym\.(.*?)[^a-zA-Z0-9_]/g),chunk:RegExp(/\.(.*?)[^a-zA-Z0-9_]/),
js:!1,obj:!0},{text:RegExp(/sym(\s*)\[(.*?)\]/g),chunk:RegExp(/\[(.*?)\]/),js:!0,obj:!0}],m=f.length;m--;)for(var j=h.match(f[m].text),l=j?j.length:0;l--;)var t=f[m].chunk.exec(j[l])[1].replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," "),n="dat"===j[0].substr(0,3)?5:"sym"===j[0].substr(0,3)?3:0,s=!f[m].js?j[l].substr(n,j[l].length).match(/[^a-zA-Z0-9_]/):"",t=(f[m].js?f[m].obj?5===n?e.datum()[c][eval(t)]:_sym.datum()[c][eval(t)]:eval(t):5===n?e.datum()[c][t]:_sym.datum()[c][t])+s,h=h.replace(j[l],
t);a.hide();b.innerHTML=h;a.width(b.clientWidth);a.height(b.clientHeight);return a};a.data=function(b,c){if(!arguments.length)return e;null!==c&&void 0!==c&&(e=c);return a};if(!arguments.length)return a;"string"===typeof c&&(null!==document.getElementById(c)&&void 0!==document.getElementById(c))&&(k=document.getElementById(c),b=document.createElement("div"),b.style.borderStyle="none",b.style.borderWidth="0px",b.style.position="absolute",b.style.display="block");return a};_data=function(c){var a=this,
b=[null],k={},m="",e=!1;a.key=function(c){if(!arguments.length)return m;var h=b.length,j=0,n=0,f=[];for(m=c;h--;){var l=b[h][c].length;f[h]={};l>n&&(j=h,n=l);for(;l--;)f[h][b[h][c][l]]=l}for(;n--;){l=b[j][c][n];k[l]={};for(var u in b[j])k[l][u]=b[j][u][n];for(h=b.length;h--;)if(h!==j){var y=f[h][l],p;for(p in b[h])k[l][p]=b[h][p][y]}}e=!0;return a};a.keys=function(){var a=[],b;for(b in k)a.push(b);return a};a.datum=function(c,h){if(!arguments.length)return e?k:b;if(c)if(h)e?k[c]=h:b[c]=h;else return e?
k[c]:b[c];return a};if(!arguments.length)return a;b=c;return a};pooch_map=function(c,a){var b=this,k=!0,m=!1,e=null,s=[],h=500,j=500,n=null,f={lat:37.090238,lng:-95.7129,zoom:4},l=5,u=18,y=2,p=null,v=null,w=[],r=null;b.house=function(a){if(!arguments.length)return r;r=pooch.fetch(a).dom();return b};b.chart=function(a){if(!arguments.length)return p;p=a;return b};b.draw=function(a){if(p){var c=w.length;if(c){for(;c--;)w[c].func(w[c].arg);w=[]}p.draw(a)}else b.init();return b};b.zoomControl=function(a){if(!arguments.length)return v;
v=a;v.target(b,null,null);return b};b.api=function(a){if(!arguments.length)return _api;k="GOOGLE"===a.toUpperCase()?!0:!1;m="BING"===a.toUpperCase()?!0:!1;return b};b.map=function(a){if(!arguments.length)return e;e=a;return b};b.symbolGroup=function(a){if(!arguments.length)return s;if(p){var c=a.length;p.symbolGroup(a);for(var e=0;e<c;++e)s[e]=p.symbolGroup()[e],s[e].map(b)}else w.push({func:b.symbolGroup,arg:a});return b};b.reset=function(){e&&b.center({lat:f.lat,lng:f.lng}).zoom(f.zoom);return b};
b.zoom=function(a){if(!arguments.length)return l;l=a;e&&(k&&e.getZoom()!=l?e.setZoom(l):m&&e.setView({zoom:l}));return b};b.zoomMax=function(a){if(!arguments.length)return u;u=a;return b};b.zoomMin=function(a){if(!arguments.length)return y;y=a;return b};b.defaultView=function(a){if(!arguments.length)return f;"undefined"!==typeof a.lat&&(f.lat=a.lat);"undefined"!==typeof a.lng&&(f.lng=a.lng);"undefined"!==typeof a.zoom&&(f.zoom=a.zoom);return b};b.zoomIn=function(){if(e){if(k||m)l=e.getZoom();l+1<=
u&&b.zoom(l+1)}return b};b.zoomOut=function(){if(e){if(k||m)l=e.getZoom();l-1>=y&&b.zoom(l-1)}return b};b.center=function(a){if(!arguments.length)return n;n=a;e&&k&&e.setCenter(new google.maps.LatLng(n.lat,n.lng));return b};b.width=function(a){if(!arguments.length)return r?parseInt(pooch.fetch(r).css("width"),10):h;h=a;return b};b.height=function(a){if(!arguments.length)return r?parseInt(pooch.fetch(r).css("height"),10):j;j=a;return b};b.loadMap=function(){if(k){var a={disableDefaultUI:!0,zoom:f.zoom,
center:new google.maps.LatLng(f.lat,f.lng),mapTypeControlOptions:{mapTypeIds:["poochStyle",google.maps.MapTypeId.ROADMAP]}},c=new google.maps.StyledMapType([{featureType:"all",elementType:"all",stylers:[{lightness:33},{gamma:0.8},{saturation:-61}]},{featureType:"road.local",elementType:"geometry",stylers:[{saturation:-73},{lightness:33},{gamma:0.8},{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{saturation:-91},{gamma:0.8},{visibility:"simplified"},{lightness:100}]},
{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"},{saturation:-91},{gamma:0.8},{lightness:94}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"simplified"},{gamma:0.76}]}]);e=new google.maps.Map(r,a);e.mapTypes.set("poochStyle",c);e.setMapTypeId("poochStyle");new L(b)}else m&&
(e=new Microsoft.Maps.Map(r,{credentials:"TODO add the option to initialize with credentials",center:new Microsoft.Maps.Location(f.lat,f.lng),mapTypeId:Microsoft.Maps.MapTypeId.road,showDashboard:!1,showScalebar:!1,zoom:f.zoom,height:b.height(),width:b.width()}));v&&(r.appendChild(v.domElem()),v.house(r))};b.init=function(){if(k){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=pooch_initMapAPIs");
document.body.appendChild(a)}else m&&(a=document.createElement("script"),a.setAttribute("type","text/javascript"),a.setAttribute("src","http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0&onScriptLoad=pooch_initMapAPIs"),document.body.appendChild(a));return b};if(!arguments.length)return b;r=pooch.fetch(c).dom();return!r?b:pooch_baseMap=b};var L=function(c){var a=this,b=null,k=c.map(),m=c.chart(),e=null;a.prototype=new google.maps.OverlayView;var s=function(){b=k.getBounds();var e=a.prototype.getProjection(),
j=google.maps.Point,n=new google.maps.LatLng(b.getNorthEast().lat(),b.getSouthWest().lng()),f=e.fromLatLngToDivPixel(n),n=e.fromDivPixelToLatLng(new j(f.x,f.y)),e=e.fromDivPixelToLatLng(new j(f.x+c.width(),f.y+c.height())),j=n.lng(),l=e.lng(),s=j;0<j&&0>l?s=-180+-1*(180-j):0>j&&0>l&&j>l?s=-360+j:0<j&&(0<l&&j>l)&&(s=j-360);m.axisMinX(pooch.helpers.lngToMercator(s)).axisMaxX(pooch.helpers.lngToMercator(l)).axisMaxY(pooch.helpers.latToMercator(n.lat())).axisMinY(pooch.helpers.latToMercator(e.lat()));
M?(pooch.fetch(m.house()).css({display:"none"}),c.draw(),setTimeout(function(){pooch.fetch(m.house()).css({top:f.y+"px",left:f.x+"px",display:"block"});c.zoom(k.getZoom());c.zoomControl().update()},1)):(c.draw(),pooch.fetch(m.house()).css({top:f.y+"px",left:f.x+"px",display:"block"}),c.zoom(k.getZoom()),c.zoomControl().update())};a.bounds=function(c){if(!arguments.length)return b;b=c;return a};a.prototype.onAdd=function(){var b=document.createElement("div");b.style.borderStyle="none";b.style.borderWidth=
"0px";b.style.position="absolute";e=b;a.prototype.getPanes().overlayMouseTarget.appendChild(b);m=new pooch.chart(b);c.chart(m);m.height(c.height()).width(c.width());s();google.maps.event.addListener(k,"dragend",function(){s()});google.maps.event.addListener(k,"zoom_changed",function(){c.zoomControl()&&c.zoomControl().slider()&&s()})};a.prototype.draw=function(){};a.prototype.onRemove=function(){e.parentNode.removeChild(e);e=null};a.prototype.setMap(k)};_fetch=function(c){var a=this,b=null,k=function(c){return!arguments.length?
a:b.currentStyle?b.currentStyle[c]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(b,"")[c]:b.style[c]};a.css=function(c){if(null!==b&&"undefined"!==typeof b){if("string"===typeof c)return k(c);if("undefined"!==typeof b.style)for(var e in c)if("undefined"===typeof _css2js[e]){var s=b.style,h;var j=e;h=j.split("-");var n=h.length;if(1===n)h=h[0];else{for(var j="-"===j.charAt(0)?h[0].charAt(0).toUpperCase()+h[0].substring(1):h[0],f=1;f<n;f++)j+=h[f].charAt(0).toUpperCase()+
h[f].substring(1);h=j}s[h]=c[e]}else b.style[_css2js[e]]=c[e]}return a};a.addClass=function(a){b.className+=" "+a;return b};a.cause=function(a){if(b[a]&&"function"===typeof b[a])b[a](b);return b};a.removeClass=function(a){a=b.className.replace(RegExp("(?:^|\\s)"+a+"(?!\\S)","g"),"");b.className=a;return b};a.dom=function(){return b};a.html=function(a){if(!arguments.length)return b.innerHTML;b.innerHTML=a;return b};a.mouseOver=function(c){"function"===typeof c&&b.addEventListener("mouseover",function(a){_mouseEvent(b,
a,c)},!1);return a};a.mouseMove=function(c){"function"===typeof c&&b.addEventListener("mousemove",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseDown=function(c){"function"===typeof c&&b.addEventListener("mousedown",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseOut=function(c){"function"===typeof c&&b.addEventListener("mouseout",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseUp=function(c){"function"===typeof c&&b.addEventListener("mouseup",function(a){_mouseEvent(b,a,c)},!1);return a};
a.removeEvent=function(){return a};if(!arguments.length||void 0===c)return a;if("string"===typeof c)"#"===c.substr(0,1)?b=document.getElementById(c.substr(1,c.length)):"."===c.substr(0,1)?b=document.getElementsByClassName(c.substr(1,c.length))[0]:null!==document.getElementById(c)&&void 0!==document.getElementById(c)&&document.getElementById(c);else if(c.tagName||c.nodeName)b=c;return a};pooch.helpers={keyFromObj:function(c){for(var a in c)if(c.hasOwnProperty(a))return a;return null},formatNumber:function(c){c=
c.toString();parts=c.toString().split(".");parts[0]=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");return parts.join(".")},distanceToPoint:function(c,a,b,k){return Math.sqrt((c-=b)*c+(a-=k)*a)},latToMercator:function(c){c=Math.sin(c*(Math.PI/180));return 3189068.5*Math.log((1+c)/(1-c))},lngToMercator:function(c){return 111319.49079327169*c},indexOf:function(c,a){for(var b=c.length;b--;)if(c[b]===a)return b},parseWebkitMatrix:function(c){c=c.match(/\([0-9epx\.\, \t\-]+/gi)[0].substr(1).split(",");
return{m11:c[0],m12:c[1],m21:c[2],m22:c[3],tX:c[4],tY:c[5]}},degreesToRadians:function(c){return c*Math.PI/180},pieChart:function(c){return new function(a){var b=this,c=a,m=function(a){var b=a.symbolGroup.data().datum(),h=a.symbolGroup.context(),j=a.symbolGroup.order();a:{for(var m=j.length,f=0;m--;)if(j[m]!==a.poochID)f+=b[j[m]][c];else{j=f;break a}j=void 0}j=360*(pooch.helpers.degreesToRadians(j)/100);a=360*(pooch.helpers.degreesToRadians(b[a.poochID][c])/100);return{sAngle:j,eAngle:j+a,ctx:h}};
b.field=function(a){if(!arguments.length)return c;c=a;return b};b.process=function(a,b){var c=m(a);c.ctx.beginPath();c.ctx.moveTo(b.x,b.y);c.ctx.arc(b.x,b.y,b.size,c.sAngle,c.eAngle,!1);c.ctx.closePath()};b.hitTest=function(a,b,c){var j=m(a);b=a.x-b;c=a.y-c;return Math.sqrt(Math.pow(b,2)+Math.pow(c,2))<a.size&&(a=Math.atan2(c,b)+Math.PI,a>=j.sAngle&&a<=j.eAngle)?!0:!1};return b}(c)}};window.pooch_initMapAPIs=function(){pooch_baseMap.loadMap()};window.pooch_baseMap=null;var M="object"===typeof navigator.vendor&&
-1!==navigator.vendor.indexOf("Apple")?!0:!1;_chartNdx=0;_css2js={"float":"styleFloat","text-decoration: blink":"textDecorationBlink","text-decoration: line-through":"textDecorationLineThrough","text-decoration: none":"textDecorationNone","text-decoration: overline":"textDecorationOverline","text-decoration: underline":"textDecorationUnderline"};_mouseEvent=function(c,a,b){if(c.getBoundingClientRect){c=c.getBoundingClientRect();var k=c.top;a.localX=a.clientX-c.left;a.localY=a.clientY-k}b(a)};pooch.log("pooch.js v"+
pooch.version)})();