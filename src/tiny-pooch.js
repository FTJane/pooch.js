(function(){pooch={version:"0.0.3",author:"Jeremy White",chart:function(c){return new K(c)},data:function(c){return new _data(c)},fetch:function(c){return _fetch(c)},map:function(c,a){return new pooch_map(c,a)},popup:function(c){return new _popup(c)},symbols:function(c){return new _symbol(c)},zoomControl:function(c){return new _zoomControl(c)}};pooch.supportsCanvas=!!document.createElement("canvas").getContext;var K=function(c){var a=this,b=0,j=0,k=null,f="chart"+_chartNdx,p=1,e=1,l=0,n=100,m=0,h=
100,u=0,x=100,q=0,v=100,w=1,s=1;_zoom=0;_zoomLevels=[1,2,4,8,16];_center={x:50,y:50};_offsetY=_offsetX=0;_cvsHidden=_ctxHidden=_ctxHltMain=_ctxMain=_ctxHltBack=_ctxBack=null;_isAnimating=!1;_isInteract=!0;_isDragging=_isMouseDown=!1;_projection=_zoomControl=null;_mouseIgnore=!1;_circle=2*Math.PI;_funcQueue=[];_sym=[];_symCur=_symObjCur=null;_symAction="over";_timeOut=null;_layersPre=[{_container:"div"}];_layersMain=[{_highlightMain:"canvas"},{_main:"canvas"},{_highlightBack:"canvas"},{_back:"canvas"}];
_layersPost=[{_mouse:"div"},{_popup:"div"}];var t=function(a){var b=pooch.helpers.keyFromObj(a),d=0===a[b]?0:"px";cssObj={};ndxPre=_layersPre.length;ndxMain=_layersMain.length;ndxPost=_layersPost.length;for(cssObj[b]=a[b]+d;ndxPre--;)d=pooch.helpers.keyFromObj(_layersPre[ndxPre]),d=pooch.fetch("#pooch"+d+"_"+f),d.css(cssObj).dom()[b]=a[b],"width"==b&&d.css({left:-(a.width/3)+"px"}),"height"==b&&d.css({top:-(a.height/3)+"px"});if(pooch.supportsCanvas)for(;ndxMain--;)d=pooch.helpers.keyFromObj(_layersMain[ndxMain]),
pooch.fetch("#pooch"+d+"_"+f).css(cssObj).dom()[b]=a[b];for(;ndxPost--;)d=pooch.helpers.keyFromObj(_layersPost[ndxPost]),pooch.fetch("#pooch"+d+"_"+f).css(cssObj).dom()[b]=a[b]},D=function(a){var b=pooch.fetch("#pooch_popup_"+f).dom();a(b)},I=function(a,d,F){var g=0,c=0,g=a.popup().offsetX(),c=a.popup().offsetY(),f=a.popup().width(),k=a.popup().height(),e=j/3,c=F-k-c-10<b/3?c:-k-c,g=d+g-f/2-10<e?e+-d+10:d+g+f/2+10>2*e?2*e-(d+f)-10:g+f/-2;a.popup().x(d+g).y(F+c)},y=function(a,d){if(!d){var F=a.localX,
g=a.localY,c=!1,f=!1,m=[],h=[],l=0,t=_sym.length,z=j,n=null,u=null;if(!_isMouseDown){for(var r=0;r<t;++r)if(_sym[r].interactive()){var q=_sym[r].state(),s;for(s in q){var E=0,x=0;switch(q[s].shape){case "circle":E=q[s].size;x=q[s].size;break;case "rect":case "hex":E=q[s].width/2;x=q[s].height/2;break;case "poly":a:{for(var c=q[s].shapePoints,v=[F,g],w=c.length;w--;){for(var B=c[w],D=!1,y=-1,H=B.length,C=H-1;++y<H;C=y)(B[y][1]<=v[1]&&v[1]<B[C][1]||B[C][1]<=v[1]&&v[1]<B[y][1])&&v[0]<(B[C][0]-B[y][0])*
(v[1]-B[y][1])/(B[C][1]-B[y][1])+B[y][0]&&(D=!D);if(D){c=!0;break a}}c=!1}break;case "custom":c=_sym[r].customShape().hitTest(q[s],F,g)}if("over"===_symAction){if(v=(w=_sym[r].map())?q[s].lng:q[s].x,w=w?q[s].lat:q[s].y,c||F<v+E&&F>v-E&&g<w+x&&g>w-x)m[l]=_sym[r],h[l]=q[s],f=!0,l++}else"closest"===_symAction&&(m[l]=_sym[r],h[l]=q[s],f=!0,l++)}}l=h.length;if(f){for(;l--;)h[l].drawFill&&(f=pooch.helpers.distanceToPoint(h[l].x,h[l].y,F,g),f<=z&&(n=m[l],u=h[l],z=f));h=n;symCur=u;if(_symCur!==symCur&&symCur){_symObjCur&&
(_symObjCur.popup().hide(),"MAIN"===_symObjCur.layer().toUpperCase()?A(_ctxHltMain,j,b):A(_ctxHltBack,j,b));u={};m="MAIN"===h.layer().toUpperCase()?"highlightMain":"highlightBack";_symObjCur=h;_symCur=symCur;u[_symCur.poochID]=_symCur;p=e=1;h=_symObjCur;z=_symObjCur.state();n=_symCur.poochID;if(!_symCur||z[n]!==_symCur[n])h.popup().layout(n),I(h,F,g);pooch.fetch(k).css({cursor:"pointer"});G(null,m,{obj:_symObjCur,key:u})}else _symCur===symCur&&symCur&&I(h,F,g)}else _symCur&&(_symObjCur.popup().hide(),
pooch.fetch(k).css({cursor:"default"}),"MAIN"===_symObjCur.layer().toUpperCase()?A(_ctxHltMain,j,b):A(_ctxHltBack,j,b)),_symCur=_symObjCur=null}}},E=function(a,b,d,g,c){var j={},f=a.state();if(1===g){var k=a.data().datum(),e=a.symAttrs();b[d].list=[];for(var h in e)b[d][h]="function"===typeof e[h]?e[h](b[d],k[d]):null!==e[h]?e[h]:b[d][h],b[d][h]!==f[d][h]&&b[d].list.push(h)}for(k=b[d].list.length;k--;)e=b[d].list[k],h=a.stepFunc(e),j[e]=h(g,f[d][e],b[d][e],c,b[d].easing);return j},B=function(a,b,
d,g,c){if(pooch.supportsCanvas){var j=c?d.fillColorHighlight:d.fillColor,f=c?d.fillOpacityHighlight:d.fillOpacity,e=c?d.drawStrokeHighlight:d.drawStroke,k=c?d.strokeWidthHighlight:d.strokeWidth,h=c?d.strokeColorHighlight:d.strokeColor,l=c?d.strokeOpacityHighlight:d.strokeOpacity;if(c?d.drawFillHighlight:d.drawFill)g.fillStyle="rgba("+j+","+f+")";e&&(g.lineWidth=k,g.strokeStyle="rgba("+h+","+l+")");c=(j=a.map())?d.lng:d.x;j=j?d.lat:d.y;switch(d.shape){case "circle":g.arc(c+_offsetX,j+_offsetY,d.size,
0,_circle,!1);break;case "rect":g.rect(c-d.width/2+_offsetX,j-d.height/2+_offsetY,d.width,d.height);break;case "bezcurve":break;case "line":g.moveTo(c,j);g.lineTo(d.xEnd,d.yEnd);break;case "hex":a=d.width/2;d=d.height/2;b=a/2;g.moveTo(c-b+_offsetX,j-d+_offsetY);g.lineTo(c+b+_offsetX,j-d+_offsetY);g.lineTo(c+a+_offsetX,j+_offsetY);g.lineTo(c+b+_offsetX,j+d+_offsetY);g.lineTo(c-b+_offsetX,j+d+_offsetY);g.lineTo(c-a+_offsetX,j+_offsetY);g.lineTo(c-b+_offsetX,j-d+_offsetY);break;case "poly":d=d.shapePoints;
for(a=d.length;a--;){b=d[a].length-1;for(g.moveTo(d[a][b][0],d[a][b][1]);b--;)g.lineTo(d[a][b][0],d[a][b][1])}break;case "custom":g=a.datum(b);b=a.data().datum(b);a.customShape().process(g,d,b);break;default:g.arc(c+_offsetX,j+_offsetY,d.size,0,_circle,!1)}}},H=function(a,d){var c="";if(a)c=a.toUpperCase(),A(d?"HIGHLIGHTMAIN"===c?_ctxHltMain:_ctxHltBack:"MAIN"===c?_ctxMain:_ctxBack,j,b);else for(var g=_sym.length,f=!1,e=!1,k=!1;g--;)switch(c=_sym[g].layer().toUpperCase(),c){case "BACK":e||(e=!0,A(_ctxBack,
j,b),A(_ctxHltBack,j,b));break;case "MAIN":f||(f=!0,A(_ctxMain,j,b),A(_ctxHltMain,j,b));break;default:k||(k=!0,A(_ctxHltMain,j,b),A(_ctxHltBack,j,b))}},G=function(a,d,b){clearTimeout(_timeOut);var c=(a=b?!0:!1)?1:_sym.length;_isAnimating=!0;if(k){pooch.supportsCanvas&&H(d,b);for(var j=0;j<c;++j)if(void 0!==d&&z!==d.toUpperCase()?a:1){var f=a?b.key:_sym[j].datum(),h=a?b.obj:_sym[j],l=a?[pooch.helpers.keyFromObj(b.key)]:h.order(),m=a?1:l.length,z=h.layer().toUpperCase(),t=a?"MAIN"===z?_ctxHltMain:_ctxHltBack:
"MAIN"===z?_ctxMain:_ctxBack,n=h.batch()?!0:!1;h.context(t);if(n&&!a){var l=h.batchObj(),u;for(u in l){m=l[u].length;for(t.beginPath();m--;){var n=l[u][m],q=E(h,f,n,p,e),r;for(r in h.symAttrs())q[r]=q[r]||f[n][r];B(h,n,q,t,a)}t.fill();t.stroke()}}else for(n=0;n<m;++n){t.beginPath();var q=E(h,f,l[n],p,e),s;for(s in h.symAttrs())q[s]=q[s]||f[l[n]][s];B(h,l[n],q,t,a);var v=a?q.drawStrokeHighlight:q.drawStroke;(a?q.drawFillHighlight:q.drawFill)&&t.fill();v&&t.stroke()}}p++;if(p<=e&&1<e)_timeOut=setTimeout(G,
1);else{p=1;for(d=_sym.length;d--;)a||_sym[d].state(!0);_zoomControl&&_zoomControl.update();_isAnimating=!1}}},A=function(a,d,b){a&&a.clearRect(0,0,d,b)},C=function(){w=(n-l)/j;s=(h-m)/b},r=function(){_center.x=l+(n-l)/2;_center.y=m+(h-m)/2},J=function(){return 0},d=function(){return _zoomLevels.length-1},z=function(d){if(!arguments.length)return a;if(d.val instanceof Array){for(var c=_projection?!0:!1,f=[],g=d.val.length,e=l-(n-l),k=n+(n-l),t=m-(h-m),z=h+(h-m);g--;){var q=d.val[g].length;f[g]=[];
for(var p=!0;q--;){f[g][q]=[];var u=d.val[g][q][0],r=d.val[g][q][1],p=c?_projection(u,r,p):{x:u,y:r},u=b-b*((p.y-t)/(z-t));f[g][q][0]=j*((p.x-e)/(k-e));f[g][q][1]=u;p=!1}}return f}f=(c="width"===d.dim)?j:b;e=n-l;k=h-m;g=c?l-e:m-k;e=c?n+e:h+k;return c?f*((d.val-g)/(e-g)):f-f*((d.val-g)/(e-g))};a.bounds=function(d){if(!arguments.length)return _bounds;if(d.length)a.axisMinX(d[3]),a.axisMaxX(d[1]),a.axisMinY(d[2]),a.axisMaxY(d[0]),u=d[3],q=d[2],v=d[0],x=void 0;else{var c=d.data().datum(),f=Number.MAX_VALUE,
g=Number.MIN_VALUE,e=f,h=g,k;for(k in c)for(var l=c[k][d.shapeData()],m=l?l.length:0;m--;)for(var t=l[m].length;t--;){var z=l[m][t][0],p=l[m][t][1];z<e&&(e=z);z>h&&(h=z);p>g&&(g=p);p<f&&(f=p)}c=b/j;k=Math.abs(g-f)/Math.abs(h-e);c<k?(c=(h-e)*(k-c)/2,e-=c,h+=c):k<c&&(c=(g-f)*(c-k)/2,f-=c,g+=c);a.axisMinX(e);a.axisMaxX(h);a.axisMinY(f);a.axisMaxY(g);u=e;x=h;q=f;v=g}C();r();return a};a.symbols=function(d){if(!arguments.length)return _sym;for(var b=d.length,c=!1,g=0;g<b;++g)_sym[g]=d[g],_sym[g].chart(a,
z),_sym[g].state(!0),k?(_sym[g].popup()&&D(_sym[g].popup().house),!c&&_sym[g].interactive()&&(a.mouseMove(y),a.mouseOut(y),c=!0)):(_funcQueue.push({func:D,arg:_sym[g].popup().house}),_funcQueue.push({func:a.mouseMove,arg:y}),_funcQueue.push({func:a.mouseOut,arg:y}));return a};a.width=function(d){if(!arguments.length)return j/3;j=3*d;k?(t({width:j}),_cvsHidden.width=j,_cvsHidden.style.width=j+"px"):_funcQueue.push({func:t,arg:{width:j}});return a};a.height=function(d){if(!arguments.length)return b/
3;b=3*d;k?(t({height:b}),_cvsHidden.height=b,_cvsHidden.style.height=b+"px"):_funcQueue.push({func:t,arg:{height:b}});return a};a.axisMinX=function(d){if(!arguments.length)return l;l=d;return a};a.axisMaxX=function(d){if(!arguments.length)return n;n=d;return a};a.axisMinY=function(d){if(!arguments.length)return m;m=d;return a};a.axisMaxY=function(d){if(!arguments.length)return h;h=d;return a};a.projection=function(d){if(!arguments.length)return _projection;null===d&&(_projection=null);"function"===
typeof d&&(_projection=d);return a};a.reset=function(){l=u;n=x;m=q;h=v;r();a.zoom(0);return a};a.zoomControl=function(c){if(!arguments.length)return _zoomControl;_zoomControl=c;_zoomControl.target(a,J,d);k.appendChild(_zoomControl.domElem());_zoomControl.house(k);var e=pooch.fetch("#pooch_container_"+f).dom(),t=!1,g={elem:null,init:function(){e.onmousedown=g.start;window.navigator.msPointerEnabled?(e.addEventListener("MSPointerDown",g.start,!1),"undefined"!==typeof e.style.msTouchAction&&(e.style.msTouchAction=
"none")):e.attachEvent&&e.setCapture?(t=!0,e.attachEvent("onmousedown",function(){g.start(window.event);return window.event.returnValue=!1})):e.addEventListener&&(e.addEventListener("touchstart",g.start,!1),e.addEventListener("mousedown",g.start,!1))},start:function(a){_isDragging=!0;if(_symObjCur){var d="MAIN"===_symObjCur.layer().toUpperCase()?"highlightMain":"highlightBack";_symObjCur.popup().hide();H(d,!0);_symObjCur=_symCur=null}g.elem=this;var d=parseInt(g.elem.style.left,10),b=parseInt(g.elem.style.top,
10);isNaN(d)&&(g.elem.style.left="0px");isNaN(b)&&(g.elem.style.top="0px");"function"===typeof window.webkitURL&&(g.elem.style.webkitTransform="matrix(1, 0, 0, 1, 0, 0)");a=a?a:window.event;g.elem.mouseX=a.clientX;g.elem.mouseY=a.clientY;window.navigator.msPointerEnabled?(document.addEventListener("MSPointerDown",g.start,!1),"undefined"!==typeof e.style.msTouchAction&&(e.style.msTouchAction="none")):e.attachEvent&&e.setCapture?(t=!0,document.attachEvent("onmousemove",function(){g.active(window.event);
return window.event.returnValue=!1}),document.attachEvent("onmouseup",function(){g.end(window.event);return window.event.returnValue=!1})):e.addEventListener&&(document.addEventListener("touchmove",g.active,!1),document.addEventListener("touchend",g.end,!1),document.addEventListener("touchcancel",g.end,!1),document.addEventListener("touchleave",g.end,!1),document.addEventListener("mousemove",g.active,!1),document.addEventListener("mouseup",g.end,!1),e.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&
(t=!0));return!1},active:function(a){a.preventDefault();if(g.elem){_isDragging=!0;a=a.changedTouches?a.changedTouches:[a];if("function"===typeof window.webkitURL){var d=pooch.helpers.parseWebkitMatrix(g.elem.style.webkitTransform),b=parseInt(d.tX,10)+(a[0].clientX-g.elem.mouseX),d=parseInt(d.tY,10)+(a[0].clientY-g.elem.mouseY);g.elem.style.webkitTransform="matrix(1, 0, 0, 1, "+b+", "+d+")"}else b=parseInt(g.elem.style.left,10)+(a[0].clientX-g.elem.mouseX),d=parseInt(g.elem.style.top,10)+(a[0].clientY-
g.elem.mouseY),g.elem.style.left=b+"px",g.elem.style.top=d+"px";g.elem.mouseX=a[0].clientX;g.elem.mouseY=a[0].clientY}return!1},end:function(){if(null!==g.elem){_isDragging=!1;var a,d,c=-(j/3),e=-(b/3);"function"===typeof window.webkitURL?(d=pooch.helpers.parseWebkitMatrix(g.elem.style.webkitTransform),a=c+parseInt(d.tX,10),d=e+parseInt(d.tY,10)):(a=parseInt(g.elem.style.left,10),d=parseInt(g.elem.style.top,10));var k=(a-c)*3*w,z=(d-e)*3*s;l-=k;n-=k;m+=z;h+=z;r();0!==a&&0!==d&&(G(),"function"===typeof window.webkitURL?
g.elem.style.webkitTransform="matrix(1, 0, 0, 1, 0, 0)":pooch.fetch("#pooch_container_"+f).css({top:e+"px",left:c+"px"}));t?document.releaseCapture():(document.removeEventListener("mousemove",g.active,!1),document.removeEventListener("mouseup",g.end,!1),document.removeEventListener("touchmove",g.active,!1),document.removeEventListener("touchend",g.end,!1),document.removeEventListener("touchcancel",g.end,!1),document.removeEventListener("touchleave",g.end,!1));g.elem=null}}};g.init();_zoomControl.update();
return a};a.zoomIn=function(){k&&_zoom+1<_zoomLevels.length&&a.zoom(_zoom+1);return a};a.zoomOut=function(){k&&(0===_zoom-1?a.reset():0<=_zoom-1&&a.zoom(_zoom-1));return a};a.zoom=function(d){if(!arguments.length)return _zoom;_zoom=d;l=_center.x-(x-u)/2/_zoomLevels[_zoom];n=_center.x+(x-u)/2/_zoomLevels[_zoom];m=_center.y-(v-q)/2/_zoomLevels[_zoom];h=_center.y+(v-q)/2/_zoomLevels[_zoom];r();C();G();return a};a.zoomLevels=function(d){if(!arguments.length)return _zoomLevels;_zoomLevels=d;return a};
a.draw=function(d,b){p=1;e=arguments.length?d:1;k?G(d,b):_funcQueue.push({func:G,arg:null});return a};a.mouseIgnore=function(d){if(!arguments.length)return _mouseIgnore;_mouseIgnore=d;return a};a.mouseMove=function(d){if("function"===typeof d){var b=function(a){d(a,_isAnimating||_isDragging||_mouseIgnore)};k?pooch.fetch("#pooch_mouse_"+f).mouseMove(b):_funcQueue.push({func:d,arg:b})}return a};a.mouseOver=function(d){"function"===typeof d&&(k?pooch.fetch("#pooch_mouse_"+f).mouseOver(d):_funcQueue.push({func:a.mouseOver,
arg:d}));return a};a.mouseDown=function(d){"function"===typeof d&&(k?pooch.fetch("#pooch_mouse_"+f).mouseDown(d):_funcQueue.push({func:a.mouseDown,arg:d}));return a};a.mouseOut=function(d){"function"===typeof d&&(k?pooch.fetch("#pooch_mouse_"+f).mouseOut(function(){y({localX:-2E4,localY:-2E4})}):_funcQueue.push({func:a.mouseOut,arg:d}));return a};a.activeSymbol=function(){return a};a.house=function(d){if(!arguments.length)return k;var c=pooch.fetch(d).dom();if(c){k=c;for(var c=[],e="",g=_layersPre.length,
h=_layersMain.length,l=_layersPost.length;g--;){var m=pooch.helpers.keyFromObj(_layersPre[g]),e=_layersPre[g][m];c.push("<"+_layersPre[g][m]+" id='pooch"+m+"_"+f+"' width='"+j+"' height='"+b+"' style='position:relative;top:0;left:0;width:"+j+"px;height:"+b+"px;'>")}if(pooch.supportsCanvas){for(;h--;)g=pooch.helpers.keyFromObj(_layersMain[h]),c.push("<"+_layersMain[h][g]+" id='pooch"+g+"_"+f+"' width='"+j+"' height='"+b+"' style='position:absolute;top:0;left:0;width:"+j+"px;height:"+b+"px;'></"+_layersMain[h][g]+
">");_cvsHidden=document.createElement("canvas");_cvsHidden.id="poochCvsHidden_"+f;_cvsHidden.width=j;_cvsHidden.height=b;_cvsHidden.style.width=j+"px";_cvsHidden.style.height=b+"px";_ctxHidden=_cvsHidden.getContext("2d")}for(;l--;)h=pooch.helpers.keyFromObj(_layersPost[l]),c.push("<"+_layersPost[l][h]+" id='pooch"+h+"_"+f+"' width='"+j+"' height='"+b+"' style='position:absolute;top:0;left:0;width:"+j+"px;height:"+b+"px;'></"+_layersPost[l][h]+">");c.push("</"+e+">");c=c.join("");k.innerHTML=c;_ctxBack=
pooch.fetch("#pooch_back_"+f).dom().getContext("2d");_ctxMain=pooch.fetch("#pooch_main_"+f).dom().getContext("2d");_ctxHltMain=pooch.fetch("#pooch_highlightMain_"+f).dom().getContext("2d");_ctxHltBack=pooch.fetch("#pooch_highlightBack_"+f).dom().getContext("2d");f="chart"+_chartNdx++;for(c=_funcQueue.length;c--;)_funcQueue[c].func(_funcQueue[c].arg);_funcQueue=[]}return a};if(!arguments.length||void 0===c)return a;a.house(c);return a};_symbol=function(c){var a=this,b=function(a,b,c,e,f){var g=c-b;
if(!e||1===e||a===e)return c;switch(f){case "linear":return b+g*(a/e);case "easeIn":return g*(a/=e)*a*a+b;case "easeOut":return g*((a=a/e-1)*a*a+1)+b;case "easeInOut":return 1>(a/=e/2)?g/2*a*a*a+b:g/2*((a-=2)*a*a+2)+b;default:return b+g*(a/e)}},j=function(a,b,c){return c},k=function(a,c,e,f,j){if(!f||1===f||a===f)return e;c=c.split(",");var g=e.split(",");e=b(a,c[0]|0,g[0]|0,f,j)>>0;var h=b(a,c[1]|0,g[1]|0,f,j)>>0;a=b(a,c[2]|0,g[2]|0,f,j)>>0;return e+","+h+","+a},f=function(a){var b=a+"_pooch_proj_y",
c;for(c in h.datum())h.datum()[c][b]=pooch.helpers.latToMercator(h.datum()[c][a]);r.lat=function(a,d){return s({dim:"height",val:d[b]})}},p=function(a){var b=a+"_pooch_proj_x",c;for(c in h.datum())h.datum()[c][b]=pooch.helpers.lngToMercator(h.datum()[c][a]);r.lng=function(a,d){return s({dim:"width",val:d[b]})}},e=function(d){if(!arguments.length)return a;var b=d.length;for(m={};b--;){var c=d[b];m[c]={};for(var e in r)m[c][e]=r[e];m[c].poochID=c;q[b]=c}return a},l=function(d,b){if(1===arguments.length)return r[d];
n(b)?d=function(a,d){return d[b]}:r[d]=b;return a},n=function(d){var b=null,c;for(c in a.state()){b=c;break}return"string"===typeof d&&"undefined"!==typeof h.datum(b)[d]};a.sort=function(){h&&"function"===typeof r.size&&q.sort(function(a,b){var c=r.size(m[a],h.datum(m[a].poochID));sizeB=r.size(m[b],h.datum(m[b].poochID));return sizeB-c});return a};a.data=function(d){if(!arguments.length)return h;h=d;e(h.keys());for(var b=A.length;b--;)A[b].func(A[b].arg);A=[];return a};a.batch=function(d){if(!arguments.length)return t;
t=d;return a};a.chart=function(d,b){if(!arguments.length)return w;w=d;s=b;return a};a.symAttrs=function(d){if(!arguments.length)return r;for(var b in d)_attr[b]=d[b];return a};a.datum=function(a){return!arguments.length?m:m[a]};a.stepFunc=function(a){return!arguments.length?J:J[a]};a.popup=function(d){if(!arguments.length)return u;u=d;u.data(a,h);E=!0;return a};a.drawFill=function(a){return l("drawFill",a)};a.drawStroke=function(a){return l("drawStroke",a)};a.drawFillHighlight=function(a){return l("drawFillHighlight",
a)};a.fillColorHighlight=function(a){return l("fillColorHighlight",a)};a.fillOpacityHighlight=function(a){return l("fillOpacityHighlight",a)};a.drawStrokeHighlight=function(a){return l("drawStrokeHighlight",a)};a.strokeWidthHighlight=function(a){return l("strokeWidthHighlight",a)};a.strokeColorHighlight=function(a){return l("strokeColorHighlight",a)};a.strokeOpacityHighlight=function(a){return l("strokeOpacityHighlight",a)};a.size=function(a){return l("size",a)};a.fillOpacity=function(a){return l("fillOpacity",
a)};a.strokeOpacity=function(a){return l("strokeOpacity",a)};a.strokeColor=function(a){return l("strokeColor",a)};a.strokeWidth=function(a){return l("strokeWidth",a)};a.shapeData=function(b){if(!arguments.length)return G;"string"===typeof b&&(G=b);return a};a.shape=function(b){if(!arguments.length)return r.shape;r.shape=b;return a};a.order=function(b){if(!arguments.length)return q;q=b;return a};a.layer=function(b){if(!arguments.length)return v;v=b;return a};a.easing=function(b){if(!arguments.length)return r.easing;
r.easing=b;return a};a.fillColor=function(b){if(!arguments.length)return r.fillColor;r.fillColor=b;D=!0;return a};a.width=function(b){if(!arguments.length)return r.width;"string"===typeof b?(H=b,r.width=function(a,c){return c[b]}):r.width=b;return a};a.height=function(b){if(!arguments.length)return r.height;r.height="string"===typeof b?function(a,c){return c[b]}:b;return a};a.interactive=function(b){if(!arguments.length)return E;E=b;return a};a.map=function(b){if(!arguments.length)return B;B=b;return a};
a.context=function(b){if(!arguments.length)return x;x=b;return a};a.customShape=function(b){if(!arguments.length)return I;I=b;return a};a.batchObj=function(b){if(!arguments.length){if(D){y={};for(var c in m){var e="string"===typeof a.fillColor()?a.fillColor():a.fillColor()(m[c],h.datum()[c]);y.hasOwnProperty(e)?y[e].push(m[c].poochID):y[e]=[m[c].poochID]}D=!1}return y}y=b;return a};a.x=function(b){if(!arguments.length)return r.x;n(b)?(H=b,r.x=function(a,b){return s({dim:"width",val:b[H]})}):r.x=function(){return s({dim:"width",
val:b})};return a};a.y=function(b){if(!arguments.length)return r.y;r.y=n(b)?function(a,c){return s({dim:"height",val:c[b]})}:function(){return s({dim:"height",val:b})};return a};a.lat=function(b){if(!arguments.length)return r.lat;"string"===typeof b?h?f(b):A.push({func:f,arg:b}):r.lat=pooch.helpers.latToMercator(b);return a};a.lng=function(b){if(!arguments.length)return r.lng;"string"===typeof b?h?p(b):A.push({func:p,arg:b}):r.lng=pooch.helpers.lngToMercator(b);return a};a.shapePoints=function(b){if(!arguments.length)return r.shapePoints;
"string"===typeof b?(a.shapeData(b),h?r.shapePoints=function(a,c){return s({sym:a,val:c[b]})}:A.push({func:a.shapePoints,arg:b})):r.shapePoints=b;return a};a.state=function(){if(!arguments.length)return C;for(var a in m){C[a]={};for(var b in r)C[a][b]=m[a][b];C[a].poochID=a}return C};var m={},h=null,u=null,x=null,q=[],v="main",w=null,s=null,t=!1,D=!1,I=null,y={},E=!1,B=null,H=null,G="",A=[],C={},r={symbolGroup:a,x:0,y:0,lat:0,lng:0,visible:!0,shape:"circle",easing:"easeInOut",drawFill:!0,drawStroke:!0,
size:6,height:6,width:6,fillColor:"200,200,200",fillOpacity:1,strokeColor:"255,255,255",strokeOpacity:1,strokeWidth:1,shapePoints:[],drawFillHighlight:!0,fillColorHighlight:"200,200,200",fillOpacityHighlight:1,drawStrokeHighlight:!0,strokeWidthHighlight:1,strokeColorHighlight:"0,0,0",strokeOpacityHighlight:1},J={symbolGroup:j,poochID:j,x:b,y:b,lat:b,lng:b,visible:j,shape:j,easing:j,drawFill:j,drawStroke:j,size:b,height:b,width:b,fillColor:k,fillOpacity:b,strokeColor:k,strokeOpacity:b,strokeWidth:b,
shapePoints:function(a,b,c){return c},drawFillHighlight:j,fillColorHighlight:j,fillOpacityHighlight:j,drawStrokeHighlight:j,strokeWidthHighlight:j,strokeColorHighlight:j,strokeOpacityHighlight:j};if(!arguments.length)return a;a.shape(c);return a};_zoomControl=function(c){var a=this,b=null,j=null,k=null,f=null,p=null,e=null,l=null,n=null,m=null,h=null,u=null,x=0,q=0,v=[],w=function(a,b){if(f){var c=pooch.fetch(b).dom();if(c)return c}else v.push({func:a,arg:b});return null},s=function(){k.reset()},
t=function(){k.zoomIn()},D=function(){k.zoomOut()},I=function(){},y=function(){};a.house=function(b){if(!arguments.length)return f;var c=pooch.fetch(b).dom();c&&(f=c,f.appendChild(j));for(c=v.length;c--;)v[c].func(v[c].arg);v=[];p&&pooch.fetch(p).mouseDown(s);e&&pooch.fetch(e).mouseDown(t);l&&pooch.fetch(l).mouseDown(D);n&&pooch.fetch(n).mouseDown(I);m&&pooch.fetch(m).mouseDown(y);return a};a.domElem=function(b){if(!arguments.length)return j;j=b;return a};a.target=function(b,c,e){if(!arguments.length)return k;
k=b;null!==c&&(h=c);null!==e&&(u=e);return a};a.reset=function(b){if(!arguments.length)return p;p=w(a.reset,b);return a};a.zoomIn=function(b){if(!arguments.length)return e;e=w(a.zoomIn,b);return a};a.zoomOut=function(b){if(!arguments.length)return l;l=w(a.zoomOut,b);return a};a.handle=function(b){if(!arguments.length)return n;n=w(a.handle,b);return a};a.slider=function(b){if(!arguments.length)return m;m=w(a.slider,b);return a};a.top=function(b){if(!arguments.length)return x;x=b;pooch.fetch(j).css({top:x+
"px"});return a};a.left=function(b){if(!arguments.length)return q;q=b;pooch.fetch(j).css({left:q+"px"});return a};a.update=function(){var b=null!==h?h():k.zoomMin(),c=null!==u?u():k.zoomMax(),b=parseInt(pooch.fetch(m).css("height"),10)/(c-b),c=(c-k.zoom())*b>>0;pooch.fetch(n).css({top:c+"px"});return a};if(!arguments.length)return a;"string"===typeof c&&(null!==document.getElementById(c)&&void 0!==document.getElementById(c))&&(b=document.getElementById(c),j=document.createElement("div"),j.style.borderStyle=
"none",j.style.borderWidth="0px",j.style.position="absolute",j.style.display="block",j.innerHTML=b.innerHTML,a.domElem(j));return a};_popup=function(c){var a=this,b=null,j=null,k=null,f=null,p=0,e=0,l=0,n=24,m=0,h=0;a.house=function(c){if(!arguments.length)return k;var e=pooch.fetch(c).dom();e&&(k=e,k.appendChild(b));return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(c){if(!arguments.length)return h;h=c;pooch.fetch(b).css({height:h+"px"});return a};a.offsetX=
function(b){if(!arguments.length)return l;l=b;return a};a.offsetY=function(b){if(!arguments.length)return n;n=b;return a};a.x=function(c){if(!arguments.length)return p;p=c;pooch.fetch(b).css({left:p+"px"});return a};a.y=function(c){if(!arguments.length)return e;e=c;pooch.fetch(b).css({top:e+"px"});return a};a.hide=function(){pooch.fetch(b).css({top:"-3000px",left:"-3000px"});return a};a.layout=function(c){if(!arguments.length)return b.innerHTML;for(var e=j.innerHTML,h=[{text:RegExp(/exec(\s*)\{(.*?)\}/g),
chunk:RegExp(/\{(.*?)\}/),js:!0,obj:!1},{text:RegExp(/data\.(.*?)[^a-zA-Z0-9_]/g),chunk:RegExp(/\.(.*?)[^a-zA-Z0-9_]/),js:!1,obj:!0},{text:RegExp(/data(\s*)\[(.*?)\]/g),chunk:RegExp(/\[(.*?)\]/),js:!0,obj:!0}],k=h.length;k--;)for(var l=e.match(h[k].text),m=l?l.length:0;m--;)var t=h[k].chunk.exec(l[m])[1].replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," "),p=!h[k].js?l[m].substr(5,l[m].length).match(/[^a-zA-Z0-9_]/):"",t=(h[k].js?h[k].obj?f.datum()[c][eval(t)]:eval(t):f.datum()[c][t])+p,
e=e.replace(l[m],t);a.hide();b.innerHTML=e;a.width(b.clientWidth);a.height(b.clientHeight);return a};a.data=function(b,c){if(!arguments.length)return f;null!==c&&void 0!==c&&(f=c);return a};if(!arguments.length)return a;"string"===typeof c&&(null!==document.getElementById(c)&&void 0!==document.getElementById(c))&&(j=document.getElementById(c),b=document.createElement("div"),b.style.borderStyle="none",b.style.borderWidth="0px",b.style.position="absolute",b.style.display="block");return a};_data=function(c){var a=
this,b=[null],j={},k="",f=!1;a.key=function(c){if(!arguments.length)return k;var e=b.length,l=0,n=0,m=[];for(k=c;e--;){var h=b[e][c].length;m[e]={};h>n&&(l=e,n=h);for(;h--;)m[e][b[e][c][h]]=h}for(;n--;){h=b[l][c][n];j[h]={};for(var u in b[l])j[h][u]=b[l][u][n];for(e=b.length;e--;)if(e!==l){var x=m[e][h],q;for(q in b[e])j[h][q]=b[e][q][x]}}f=!0;return a};a.keys=function(){var a=[],b;for(b in j)a.push(b);return a};a.datum=function(c,e){if(!arguments.length)return f?j:b;if(c)if(e)f?j[c]=e:b[c]=e;else return f?
j[c]:b[c];return a};if(!arguments.length)return a;b=c;return a};pooch_map=function(c,a){var b=this,j=!0,k=!1,f=null,p=[],e=500,l=500,n=null,m={lat:37.090238,lng:-95.7129,zoom:4},h=5,u=18,x=2,q=null,v=null,w=[],s=null;b.house=function(a){if(!arguments.length)return s;s=pooch.fetch(a).dom();return b};b.chart=function(a){if(!arguments.length)return q;q=a;return b};b.draw=function(a){if(q){var c=w.length;if(c){for(;c--;)w[c].func(w[c].arg);w=[]}q.draw(a)}else b.init();return b};b.zoomControl=function(a){if(!arguments.length)return v;
v=a;v.target(b,null,null);return b};b.api=function(a){if(!arguments.length)return _api;j="GOOGLE"===a.toUpperCase()?!0:!1;k="BING"===a.toUpperCase()?!0:!1;return b};b.map=function(a){if(!arguments.length)return f;f=a;return b};b.symbols=function(a){if(!arguments.length)return p;if(q){var c=a.length;q.symbols(a);for(var e=0;e<c;++e)p[e]=q.symbols()[e],p[e].map(b)}else w.push({func:b.symbols,arg:a});return b};b.reset=function(){f&&b.center({lat:m.lat,lng:m.lng}).zoom(m.zoom);return b};b.zoom=function(a){if(!arguments.length)return h;
h=a;f&&(j&&f.getZoom()!=h?f.setZoom(h):k&&f.setView({zoom:h}));return b};b.zoomMax=function(a){if(!arguments.length)return u;u=a;return b};b.zoomMin=function(a){if(!arguments.length)return x;x=a;return b};b.defaultView=function(a){if(!arguments.length)return m;"undefined"!==typeof a.lat&&(m.lat=a.lat);"undefined"!==typeof a.lng&&(m.lng=a.lng);"undefined"!==typeof a.zoom&&(m.zoom=a.zoom);return b};b.zoomIn=function(){if(f){if(j||k)h=f.getZoom();h+1<=u&&b.zoom(h+1)}return b};b.zoomOut=function(){if(f){if(j||
k)h=f.getZoom();h-1>=x&&b.zoom(h-1)}return b};b.center=function(a){if(!arguments.length)return n;n=a;f&&j&&f.setCenter(new google.maps.LatLng(n.lat,n.lng));return b};b.width=function(a){if(!arguments.length)return s?parseInt(pooch.fetch(s).css("width"),10):e;e=a;return b};b.height=function(a){if(!arguments.length)return s?parseInt(pooch.fetch(s).css("height"),10):l;l=a;return b};b.loadMap=function(){if(j){var a={disableDefaultUI:!0,zoom:m.zoom,center:new google.maps.LatLng(m.lat,m.lng),mapTypeControlOptions:{mapTypeIds:["poochStyle",
google.maps.MapTypeId.ROADMAP]}},c=new google.maps.StyledMapType([{featureType:"all",elementType:"all",stylers:[{lightness:33},{gamma:0.8},{saturation:-61}]},{featureType:"road.local",elementType:"geometry",stylers:[{saturation:-73},{lightness:33},{gamma:0.8},{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{saturation:-91},{gamma:0.8},{visibility:"simplified"},{lightness:100}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},
{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"},{saturation:-91},{gamma:0.8},{lightness:94}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"simplified"},{gamma:0.76}]}]);f=new google.maps.Map(s,a);f.mapTypes.set("poochStyle",c);f.setMapTypeId("poochStyle");new L(b)}else k&&(f=new Microsoft.Maps.Map(s,{credentials:"TODO add the option to initialize with credentials",
center:new Microsoft.Maps.Location(m.lat,m.lng),mapTypeId:Microsoft.Maps.MapTypeId.road,showDashboard:!1,showScalebar:!1,zoom:m.zoom,height:b.height(),width:b.width()}));v&&(s.appendChild(v.domElem()),v.house(s))};b.init=function(){if(j){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=pooch_initMapAPIs");document.body.appendChild(a)}else k&&(a=document.createElement("script"),a.setAttribute("type",
"text/javascript"),a.setAttribute("src","http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0&onScriptLoad=pooch_initMapAPIs"),document.body.appendChild(a));return b};if(!arguments.length)return b;s=pooch.fetch(c).dom();return!s?b:pooch_baseMap=b};var L=function(c){var a=this,b=null,j=c.map(),k=c.chart(),f=null;a.prototype=new google.maps.OverlayView;var p=function(){b=j.getBounds();var e=a.prototype.getProjection(),f=google.maps.Point,n=new google.maps.LatLng(b.getNorthEast().lat(),b.getSouthWest().lng()),
m=e.fromLatLngToDivPixel(n),n=e.fromDivPixelToLatLng(new f(m.x,m.y)),e=e.fromDivPixelToLatLng(new f(m.x+c.width(),m.y+c.height())),f=n.lng(),h=e.lng(),p=f;0<f&&0>h?p=-180+-1*(180-f):0>f&&0>h&&f>h?p=-360+f:0<f&&(0<h&&f>h)&&(p=f-360);k.axisMinX(pooch.helpers.lngToMercator(p)).axisMaxX(pooch.helpers.lngToMercator(h)).axisMaxY(pooch.helpers.latToMercator(n.lat())).axisMinY(pooch.helpers.latToMercator(e.lat()));M?(pooch.fetch(k.house()).css({display:"none"}),c.draw(),setTimeout(function(){pooch.fetch(k.house()).css({top:m.y+
"px",left:m.x+"px",display:"block"});c.zoom(j.getZoom());c.zoomControl().update()},1)):(c.draw(),pooch.fetch(k.house()).css({top:m.y+"px",left:m.x+"px",display:"block"}),c.zoom(j.getZoom()),c.zoomControl().update())};a.bounds=function(c){if(!arguments.length)return b;b=c;return a};a.prototype.onAdd=function(){var b=document.createElement("div");b.style.borderStyle="none";b.style.borderWidth="0px";b.style.position="absolute";f=b;a.prototype.getPanes().overlayMouseTarget.appendChild(b);k=new pooch.chart(b);
c.chart(k);k.height(c.height()).width(c.width());p();google.maps.event.addListener(j,"dragend",function(){p()});google.maps.event.addListener(j,"zoom_changed",function(){c.zoomControl()&&c.zoomControl().slider()&&p()})};a.prototype.draw=function(){};a.prototype.onRemove=function(){f.parentNode.removeChild(f);f=null};a.prototype.setMap(j)};_fetch=function(c){var a=this,b=null,j=function(c){return!arguments.length?a:b.currentStyle?b.currentStyle[c]:document.defaultView&&document.defaultView.getComputedStyle?
document.defaultView.getComputedStyle(b,"")[c]:b.style[c]};a.css=function(c){if("string"===typeof c)return j(c);for(var f in c)if(void 0===_css2js[f]){var p=b.style,e;var l=f;e=l.split("-");var n=e.length;if(1===n)e=e[0];else{for(var l="-"===l.charAt(0)?e[0].charAt(0).toUpperCase()+e[0].substring(1):e[0],m=1;m<n;m++)l+=e[m].charAt(0).toUpperCase()+e[m].substring(1);e=l}p[e]=c[f]}else b.style[_css2js[f]]=c[f];return a};a.dom=function(){return b};a.mouseOver=function(c){"function"===typeof c&&b.addEventListener("mouseover",
function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseMove=function(c){"function"===typeof c&&b.addEventListener("mousemove",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseDown=function(c){"function"===typeof c&&b.addEventListener("mousedown",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseOut=function(c){"function"===typeof c&&b.addEventListener("mouseout",function(a){_mouseEvent(b,a,c)},!1);return a};a.mouseUp=function(c){"function"===typeof c&&b.addEventListener("mouseup",function(a){_mouseEvent(b,
a,c)},!1);return a};a.removeEvent=function(){return a};if(!arguments.length||void 0===c)return a;if("string"===typeof c)"#"===c.substr(0,1)?b=document.getElementById(c.substr(1,c.length)):"."===c.substr(0,1)?b=document.getElementsByClassName(c.substr(1,c.length))[0]:null!==document.getElementById(c)&&void 0!==document.getElementById(c)&&document.getElementById(c);else if(c.tagName||c.nodeName)b=c;return a};pooch.helpers={keyFromObj:function(c){for(var a in c)if(c.hasOwnProperty(a))return a;return null},
formatNumber:function(c){c=c.toString();parts=c.toString().split(".");parts[0]=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");return parts.join(".")},distanceToPoint:function(c,a,b,j){return Math.sqrt((c-=b)*c+(a-=j)*a)},latToMercator:function(c){c=Math.sin(c*(Math.PI/180));return 3189068.5*Math.log((1+c)/(1-c))},lngToMercator:function(c){return 111319.49079327169*c},indexOf:function(c,a){for(var b=c.length;b--;)if(c[b]===a)return b},parseWebkitMatrix:function(c){c=c.match(/\([0-9epx\.\, \t\-]+/gi)[0].substr(1).split(",");
return{m11:c[0],m12:c[1],m21:c[2],m22:c[3],tX:c[4],tY:c[5]}},degreesToRadians:function(c){return c*Math.PI/180},pieChart:function(c){return new function(a){var b=function(b,c,f){for(var p=f.length,e=0;p--;)if(f[p]!==b)e+=c[f[p]][a];else return e};this.process=function(c,k){var f=c.symbolGroup.data().datum(),p=c.symbolGroup.context(),e=c.symbolGroup.order(),e=b(c.poochID,f,e),e=360*(pooch.helpers.degreesToRadians(e)/100),f=360*(pooch.helpers.degreesToRadians(f[c.poochID][a])/100),f=e+f;p.beginPath();
p.moveTo(k.x,k.y);p.arc(k.x,k.y,k.size,e,f,!1);p.closePath()};this.hitTest=function(c,k,f){var p=c.symbolGroup.data().datum();k=c.x-k;f=c.y-f;var e=c.symbolGroup.order(),l=Math.sqrt(Math.pow(k,2)+Math.pow(f,2)),e=b(c.poochID,p,e),e=360*(pooch.helpers.degreesToRadians(e)/100),p=360*(pooch.helpers.degreesToRadians(p[c.poochID][a])/100),p=e+p;return l<c.size&&(c=Math.atan2(f,k)+Math.PI,c>=e&&c<=p)?!0:!1};return this}(c)}};window.pooch_initMapAPIs=function(){pooch_baseMap.loadMap()};window.pooch_baseMap=
null;var M="object"===typeof navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")?!0:!1;_chartNdx=0;_css2js={"float":"styleFloat","text-decoration: blink":"textDecorationBlink","text-decoration: line-through":"textDecorationLineThrough","text-decoration: none":"textDecorationNone","text-decoration: overline":"textDecorationOverline","text-decoration: underline":"textDecorationUnderline"};_mouseEvent=function(c,a,b){if(c.getBoundingClientRect){c=c.getBoundingClientRect();var j=c.top;a.localX=a.clientX-
c.left;a.localY=a.clientY-j}b(a)}})();